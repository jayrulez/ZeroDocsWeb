<!-- this is a global static patch html file  -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from zero.digipen.edu/Tutorials/Scripting/Events2.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 27 Dec 2022 22:35:08 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Events 2 &mdash; Zero Engine 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Zero Engine 1.0 documentation" href="../../index-2.html"/>
        <link rel="up" title="Scripting" href="index.html"/>
        <link rel="next" title="Events 3" href="Events3.html"/>
        <link rel="prev" title="Events" href="Events1.html"/>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30697525-2', 'auto');
  ga('send', 'pageview');

</script>



  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index-2.html" class="icon icon-home"> Zero Engine
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://zero.digipen.edu/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="../../Launcher/ZeroLauncherSetup.html">Download Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../GettingStarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ZeroManual/index.html">Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Editor/index.html">Editor</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Scripting</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Scripting1.html">Scripting 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting2.html">Scripting 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting3.html">Scripting 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting4.html">Scripting 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="Events1.html">Events</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Events 2</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Events3.html">Events 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="Events4.html">Events 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="Actions.html">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="UsingCustomEaseInActionsTutorial.html">Using Custom Eases in Actions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Architecture/index.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Gameplay/index.html">Gameplay</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Graphics/index.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Physics/index.html">Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../UI/index.html">User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../AI/index.html">Artificial Intelligence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Workshops/index.html">Classes &amp; Workshops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Support/index.html">Zero Engine Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://survey.digipen.edu/survey/index/sid/524363/newtest/Y/lang/en">Feedback Survey</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index-2.html">Zero Engine</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index-2.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Tutorials</a> &raquo;</li>
      
          <li><a href="index.html">Scripting</a> &raquo;</li>
      
    <li>Events 2</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/Tutorials/Scripting/Events2.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="searchtitle section" id="events-2">
<span id="tutorialsevents2"></span><h1>Events 2</h1>
<p class="searchdescription">Events are used for many features in the engine beyond just running the update loop. While both <strong>Time</strong> &amp; <strong>Frame Based Movement</strong> depend on update events, there are many other event types which can drive object behavior and even play character movement.</p>
<div class="section" id="learning-objectives">
<span id="tutorialsevents2learningobjectives"></span><h2>Learning Objectives</h2>
<ul class="simple">
<li>Learn how to use the LogicUpdate event to make a player controller</li>
<li>Learn how to use Keyboard events with the LogicUpdate event to make a more efficient player controller</li>
<li>Learn how to use Mouse events with the LogicUpdate event to make an interpolating player controller</li>
</ul>
<table border="1" class="vocabsection docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">Vocabulary</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Nine-Slice Scaling</td>
<td>Tiling</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="level-setup">
<h2>Level Setup</h2>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/LauncherNewProject.html#manualcreatenewproject"><span>Create a New Project</span></a></li>
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/Commands.html#manualcommands"><span>Command</span></a> : <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create â€£ Create Sprite</span></li>
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SelectObject.html#manualselectobject"><span>Select the Sprite you created</span></a></li>
<li>In the Properties window<ul>
<li>Set Name to: <code class="docutils literal"><span class="pre">Player</span></code></li>
</ul>
</li>
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a></li>
</ul>
</div>
<div class="section" id="adding-the-playercontroller-zilchscript">
<h2>Adding the PlayerController ZilchScript</h2>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/ResourceAdding.html#manualresourceadding"><span>Add a new ZilchScript resource</span></a> Named: <code class="docutils literal"><span class="pre">PlayerController</span></code></li>
<li>In the <strong>PlayerController</strong> script<ul>
<li>Update the <strong>PlayerController</strong> component with the following code:</li>
</ul>
</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PlayerController</span> <span class="p">:</span> <span class="n">ZilchComponent</span>
<span class="p">{</span>
  <span class="c1">// This function is called when the object is created</span>
  <span class="n">function</span> <span class="nf">Initialize</span><span class="p">(</span><span class="n">init</span> <span class="p">:</span> <span class="n">CogInitializer</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">Zero</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Space</span><span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">LogicUpdate</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">OnLogicUpdate</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">function</span> <span class="nf">OnLogicUpdate</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">UpdateEvent</span><span class="p">)</span>
  <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a></li>
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SelectObject.html#manualselectobject"><span>Select the Player Object</span></a></li>
<li>In the Properties Window<ul>
<li><span class="xref std std-ref">Add a PlayerController component</span></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="keyboard-input">
<span id="tutorialsevents2keyboardinput"></span><h2>Keyboard Input</h2>
<p>Now we will detect keyboard input in the <code class="docutils literal"><span class="pre">OnLogicUpdate</span></code> function. In the Zero Engine, we can use the <code class="docutils literal"><span class="pre">Zero.Keyboard.KeyIsPressed</span></code> function to detect user input. This function accepts a key id argument that is associated with specific keys on the keyboard.</p>
<p>Let&#8217;s detect if the Up arrow key is pressed:</p>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/StopGame.html#manualstopgame"><span>Stop the Game</span></a></li>
<li>Open the <strong>PlayerController</strong> script</li>
<li>Update the <strong>OnLogicUpdate</strong> function with the following code:</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre><span></span> <span class="n">function</span> <span class="nf">OnLogicUpdate</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">UpdateEvent</span><span class="p">)</span>
 <span class="p">{</span>
<span class="hll">   <span class="c1">// If I press the up arrow key,</span>
</span><span class="hll">   <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsPressed</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Up</span><span class="p">))</span>
</span><span class="hll">   <span class="p">{</span>
</span><span class="hll">     <span class="c1">// print confirmation it happened.</span>
</span><span class="hll">     <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Up Arrow Pressed&quot;</span><span class="p">);</span>
</span><span class="hll">   <span class="p">}</span>
</span> <span class="p">}</span>
</pre></div>
</div>
<p>The Zero.Keyboard.KeyIsPressed function returns a <strong>Boolean</strong> value. This value can either be <strong>true</strong> or <strong>false</strong>; therefore, the function call can be used by the if statement as its boolean condition.</p>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>Now when you pressed the Up arrow key on the keyboard, it should print &#8220;Up Arrow Pressed&#8221; in the Console Window.</p>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/StopGame.html#manualstopgame"><span>Stop the Game</span></a></li>
</ul>
</div>
<div class="section" id="frame-based-movement">
<h2>Frame-based Movement</h2>
<p>Up until now, we have been detecting input from the keyboard and printing to the Console Window. Now we are going to make our Player object move using code in our PlayerController script. We know from setting our properties in the editor that the <strong>Transform</strong> component is where our <strong>Translation</strong> (position) is held. Our Translation is stored as a 3D Vector. Now we will update the Translation vector inside the Transform component from within our PlayerController script.</p>
<p>Let&#8217;s make our Player move along the positive world y-axis when we press the Up arrow key:</p>
<ul class="simple">
<li>Open the <strong>PlayerController</strong> script</li>
<li>Update the <strong>OnLogicUpdate</strong> function with the following line of code:</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre><span></span> <span class="n">function</span> <span class="nf">OnLogicUpdate</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">UpdateEvent</span><span class="p">)</span>
 <span class="p">{</span>
   <span class="c1">// If I press the up arrow key,</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsPressed</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Up</span><span class="p">))</span>
   <span class="p">{</span>
     <span class="c1">// print confirmation it happened.</span>
     <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Up Arrow Pressed&quot;</span><span class="p">);</span>
<span class="hll">     <span class="c1">// Move up along world y-axis.</span>
</span><span class="hll">     <span class="k">this</span><span class="p">.</span><span class="n">Owner</span><span class="p">.</span><span class="n">Transform</span><span class="p">.</span><span class="n">Translation</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span>   <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>With this code, we are adding a 3D vector to our Transform&#8217;s 3D translation vector. This should move our object in the positive direction along the world y-axis.</p>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
<li>Press the Up arrow key repeatedly</li>
</ul>
<p>Now in addition to printing, the Player object should be moving by one unit in the positive direction along the world y-axis. We have been checking for the up arrow key being <strong>pressed</strong>. Let&#8217;s check for if the up arrow key is being <strong>held down</strong>.</p>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/StopGame.html#manualstopgame"><span>Stop the Game</span></a></li>
<li>Open the <strong>PlayerController</strong> script</li>
<li>In the <strong>OnLogicUpdate</strong> function, change <code class="docutils literal"><span class="pre">KeyIsPressed</span></code> to <code class="docutils literal"><span class="pre">KeyIsDown</span></code>:</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="c1">// If I hold down the up arrow key,</span>
<span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Up</span><span class="p">))</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
<li>Hold the up arrow key down</li>
</ul>
<p>The Player object continues moving as long as the Up arrow key is held down.</p>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/StopGame.html#manualstopgame"><span>Stop the Game</span></a></li>
</ul>
<p>Now let&#8217;s add the logic that will allow the Player object to move in all four arrow directions.</p>
<ul class="simple">
<li>Open the <strong>PlayerController</strong> script</li>
<li>change the <strong>OnLogicUpdate</strong> to the following code:</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre><span></span> <span class="n">function</span> <span class="nf">OnLogicUpdate</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">UpdateEvent</span><span class="p">)</span>
 <span class="p">{</span>
<span class="hll">   <span class="c1">// Have a place to record the total movement we want to make:</span>
</span><span class="hll">   <span class="kt">var</span> <span class="n">movement</span> <span class="p">=</span>  <span class="n">Real3</span><span class="p">();</span>
</span><span class="hll">
</span><span class="hll">   <span class="c1">// If I hold down the up arrow key,</span>
</span><span class="hll">   <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Up</span><span class="p">))</span>
</span><span class="hll">   <span class="p">{</span>
</span><span class="hll">     <span class="c1">// Record desired upward motion along the world y-axis:</span>
</span><span class="hll">     <span class="n">movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">   <span class="p">}</span>
</span><span class="hll">   <span class="c1">// If I hold down the down arrow key,</span>
</span><span class="hll">   <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Down</span><span class="p">))</span>
</span><span class="hll">   <span class="p">{</span>
</span><span class="hll">     <span class="c1">// Record desired downward motion along the world y-axis:</span>
</span><span class="hll">     <span class="n">movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="p">-</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">   <span class="p">}</span>
</span><span class="hll">   <span class="c1">// If I hold down the right arrow key,</span>
</span><span class="hll">   <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Right</span><span class="p">))</span>
</span><span class="hll">   <span class="p">{</span>
</span><span class="hll">     <span class="c1">// Record desired rightward motion along the world x-axis:</span>
</span><span class="hll">     <span class="n">movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">   <span class="p">}</span>
</span><span class="hll">   <span class="c1">// If I hold down the left arrow key,</span>
</span><span class="hll">   <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Left</span><span class="p">))</span>
</span><span class="hll">   <span class="p">{</span>
</span><span class="hll">     <span class="c1">// Record desired leftward motion along the world x-axis:</span>
</span><span class="hll">     <span class="n">movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(-</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">   <span class="p">}</span>
</span><span class="hll">
</span><span class="hll">   <span class="c1">// Apply the recorded movement to our Transform</span>
</span><span class="hll">   <span class="k">this</span><span class="p">.</span><span class="n">Owner</span><span class="p">.</span><span class="n">Transform</span><span class="p">.</span><span class="n">Translation</span> <span class="p">+=</span> <span class="n">movement</span><span class="p">;</span>
</span><span class="hll"> <span class="p">}</span>
</span></pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>Now you can move the player up, down, left, and right; however it is moving incredibly fast. This is because currently the player is being moved one unit each frame, and at sixty frames per second the block is moving too fast.</p>
<ul class="simple">
<li>Update the <strong>OnLogicUpdate</strong> with the following code:</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre><span></span>   <span class="c1">// If I hold down the left arrow key,</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Left</span><span class="p">))</span>
   <span class="p">{</span>
     <span class="c1">// Record desired leftward motion along the world x-axis:</span>
     <span class="n">movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(-</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
   <span class="p">}</span>
   <span class="c1">// Apply the recorded movement to our Transform</span>
<span class="hll">   <span class="k">this</span><span class="p">.</span><span class="n">Owner</span><span class="p">.</span><span class="n">Transform</span><span class="p">.</span><span class="n">Translation</span> <span class="p">+=</span> <span class="n">movement</span> <span class="p">*</span> <span class="k">event</span><span class="p">.</span><span class="n">Dt</span><span class="p">;</span>
</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>By multiplying our movement vector by Dt we can scale the speed to move the object at a time scale of units per second instead of units per frame. This is a far more practical way of moving objects and keeping them at a consistent timescale. If Dt is used consistently throughout the project it also makes it easy to do time sensitive effects such as slow motion.</p>
<p>The only problem with the current setup is that the player is moving too slow. Multiplying the movement vector by <code class="docutils literal"><span class="pre">event.Dt</span></code> greatly decreases how far the Player moves along the x- and y-axes&#8211;a decrease that would be too much for most games. To fix this, while also adding the ability to change the speed of the Player at will, let&#8217;s add a new speed variable with the Property attribute.</p>
<ul class="simple">
<li>Update the <code class="docutils literal"><span class="pre">PlayerController</span></code> with the following code:</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre><span></span> <span class="k">class</span> <span class="nc">PlayerController</span> <span class="p">:</span> <span class="n">ZilchComponent</span>
 <span class="p">{</span>
<span class="hll">   <span class="c1">//Variable to set the speed of the Player</span>
</span><span class="hll"><span class="na">   [Property]</span>
</span><span class="hll">   <span class="kt">var</span> <span class="n">Speed</span> <span class="p">:</span> <span class="n">Real</span> <span class="p">=</span> <span class="m">5.0</span><span class="p">;</span>
</span>
   <span class="c1">// This function is called when the object is created</span>
   <span class="n">function</span> <span class="nf">Initialize</span><span class="p">(</span><span class="n">init</span> <span class="p">:</span> <span class="n">CogInitializer</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="n">Zero</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Space</span><span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">LogicUpdate</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">OnLogicUpdate</span><span class="p">);</span>
   <span class="p">}</span>

   <span class="n">function</span> <span class="nf">OnLogicUpdate</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">UpdateEvent</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="c1">// Have a place to record the total movement we want to make:</span>
     <span class="kt">var</span> <span class="n">movement</span> <span class="p">=</span>  <span class="n">Real3</span><span class="p">();</span>
     <span class="c1">// If I hold down the up arrow key,</span>
     <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Up</span><span class="p">))</span>
     <span class="p">{</span>
       <span class="c1">// Record desired upward motion along the world y-axis:</span>
       <span class="n">movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="c1">// If I hold down the down arrow key,</span>
     <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Down</span><span class="p">))</span>
     <span class="p">{</span>
       <span class="c1">// Record desired downward motion along the world y-axis:</span>
       <span class="n">movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="p">-</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="c1">// If I hold down the right arrow key,</span>
     <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Right</span><span class="p">))</span>
     <span class="p">{</span>
       <span class="c1">// Record desired rightward motion along the world x-axis:</span>
       <span class="n">movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="c1">// If I hold down the left arrow key,</span>
     <span class="k">if</span> <span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">.</span><span class="n">KeyIsDown</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">Left</span><span class="p">))</span>
     <span class="p">{</span>
       <span class="c1">// Record desired leftward motion along the world x-axis:</span>
       <span class="n">movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(-</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
     <span class="p">}</span>
<span class="hll">     <span class="c1">// Apply the recorded movement to our Transform</span>
</span><span class="hll">     <span class="k">this</span><span class="p">.</span><span class="n">Owner</span><span class="p">.</span><span class="n">Transform</span><span class="p">.</span><span class="n">Translation</span> <span class="p">+=</span> <span class="n">movement</span> <span class="p">*</span> <span class="k">event</span><span class="p">.</span><span class="n">Dt</span> <span class="p">*</span> <span class="k">this</span><span class="p">.</span><span class="n">Speed</span><span class="p">;</span>
</span>   <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>You should now be be moving at nice, smooth speed around the level. If you wish the change the speed, simply open the <code class="docutils literal"><span class="pre">PlayerController</span></code> Component on the Player object and change the <code class="docutils literal"><span class="pre">Speed</span></code> property to whatever value you wish.</p>
</div>
<div class="section" id="using-keyboard-events">
<h2>Using Keyboard Events</h2>
<p>As you now know, LogicUpdate gets called every frame. Since we&#8217;re updating movement inside of <code class="docutils literal"><span class="pre">OnLogicUpdate</span></code>, the PlayerController script is constantly checking to see if the four arrow keys are being pressed. This is not very efficient. What if there was a way to check what key has been pressed <em>only</em> when a key is pressed on the keyboard? Enter Keyboard Events.</p>
<p>The two events we&#8217;ll be using are <code class="docutils literal"><span class="pre">KeyDown</span></code> and <code class="docutils literal"><span class="pre">KeyUp</span></code>. They both are dispatched onto Zero&#8217;s Keyboard object, requiring a different syntax when connecting to the events&#8211;<code class="docutils literal"><span class="pre">Zero.Keyboard</span></code>&#8211;which will be demonstrated in the code block below. As the names suggests, <code class="docutils literal"><span class="pre">KeyDown</span></code> is dispatched when a key is pressed down while <code class="docutils literal"><span class="pre">KeyUp</span></code> is dispatched when a key that is being pressed down is released.</p>
<p>In terms of the changes we need to make to our script, most of the logic stays exactly the same&#8211;it&#8217;s just moved to different places, as we will now see.</p>
<ul class="simple">
<li>Update the <code class="docutils literal"><span class="pre">PlayerController</span></code> ZilchScript with the following code:</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre><span></span> <span class="k">class</span> <span class="nc">PlayerController</span> <span class="p">:</span> <span class="n">ZilchComponent</span>
 <span class="p">{</span>
   <span class="c1">//Variable to set the speed of the Player</span>
<span class="na">   [Property]</span>
   <span class="kt">var</span> <span class="n">Speed</span> <span class="p">:</span> <span class="n">Real</span> <span class="p">=</span> <span class="m">5.0</span><span class="p">;</span>

<span class="hll">   <span class="c1">//Variable to track the changes to the players movement</span>
</span><span class="hll">   <span class="kt">var</span> <span class="n">Movement</span> <span class="p">:</span> <span class="n">Real3</span> <span class="p">=</span> <span class="n">Real3</span><span class="p">();</span>
</span>
   <span class="n">function</span> <span class="nf">Initialize</span><span class="p">(</span><span class="n">init</span> <span class="p">:</span> <span class="n">CogInitializer</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">Zero</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Space</span><span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">LogicUpdate</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">OnLogicUpdate</span><span class="p">);</span>
<span class="hll">       <span class="c1">//Listen for the KeyDown and KeyUp events</span>
</span><span class="hll">       <span class="n">Zero</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">KeyDown</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">OnKeyDown</span><span class="p">);</span>
</span><span class="hll">       <span class="n">Zero</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="n">Zero</span><span class="p">.</span><span class="n">Keyboard</span><span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">KeyUp</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">OnKeyUp</span><span class="p">);</span>
</span>   <span class="p">}</span>

<span class="hll">   <span class="c1">//Response function called when a key is pressed down</span>
</span><span class="hll">   <span class="n">function</span> <span class="nf">OnKeyDown</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">KeyboardEvent</span><span class="p">)</span>
</span><span class="hll">   <span class="p">{</span>
</span><span class="hll">     <span class="c1">// If I hold down the up arrow key,</span>
</span><span class="hll">     <span class="k">if</span> <span class="p">(</span><span class="k">event</span><span class="p">.</span><span class="n">Key</span> <span class="p">==</span> <span class="n">Keys</span><span class="p">.</span><span class="n">Up</span><span class="p">)</span>
</span><span class="hll">     <span class="p">{</span>
</span><span class="hll">       <span class="c1">// Record desired upward motion along the world y-axis:</span>
</span><span class="hll">       <span class="k">this</span><span class="p">.</span><span class="n">Movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">     <span class="p">}</span>
</span><span class="hll">     <span class="c1">// If I hold down the down arrow key,</span>
</span><span class="hll">     <span class="k">if</span> <span class="p">(</span><span class="k">event</span><span class="p">.</span><span class="n">Key</span> <span class="p">==</span> <span class="n">Keys</span><span class="p">.</span><span class="n">Down</span><span class="p">)</span>
</span><span class="hll">     <span class="p">{</span>
</span><span class="hll">       <span class="c1">// Record desired downward motion along the world y-axis:</span>
</span><span class="hll">       <span class="k">this</span><span class="p">.</span><span class="n">Movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="p">-</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">     <span class="p">}</span>
</span><span class="hll">     <span class="c1">// If I hold down the right arrow key,</span>
</span><span class="hll">     <span class="k">if</span> <span class="p">(</span><span class="k">event</span><span class="p">.</span><span class="n">Key</span> <span class="p">==</span> <span class="n">Keys</span><span class="p">.</span><span class="n">Right</span><span class="p">)</span>
</span><span class="hll">     <span class="p">{</span>
</span><span class="hll">       <span class="c1">// Record desired rightward motion along the world x-axis:</span>
</span><span class="hll">       <span class="k">this</span><span class="p">.</span><span class="n">Movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">     <span class="p">}</span>
</span><span class="hll">     <span class="c1">// If I hold down the left arrow key,</span>
</span><span class="hll">     <span class="k">if</span> <span class="p">(</span><span class="k">event</span><span class="p">.</span><span class="n">Key</span> <span class="p">==</span> <span class="n">Keys</span><span class="p">.</span><span class="n">Left</span><span class="p">)</span>
</span><span class="hll">     <span class="p">{</span>
</span><span class="hll">       <span class="c1">// Record desired leftward motion along the world x-axis:</span>
</span><span class="hll">       <span class="k">this</span><span class="p">.</span><span class="n">Movement</span> <span class="p">+=</span>  <span class="n">Real3</span><span class="p">(-</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">     <span class="p">}</span>
</span><span class="hll">   <span class="p">}</span>
</span><span class="hll">
</span><span class="hll">   <span class="c1">//Response function called when a key is released</span>
</span><span class="hll">   <span class="c1">//Used to set change Movement back to it&#39;s value before a key was pressed</span>
</span><span class="hll">   <span class="n">function</span> <span class="nf">OnKeyUp</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">KeyboardEvent</span><span class="p">)</span>
</span><span class="hll">   <span class="p">{</span>
</span><span class="hll">     <span class="c1">// If I hold down the up arrow key,</span>
</span><span class="hll">     <span class="k">if</span> <span class="p">(</span><span class="k">event</span><span class="p">.</span><span class="n">Key</span> <span class="p">==</span> <span class="n">Keys</span><span class="p">.</span><span class="n">Up</span><span class="p">)</span>
</span><span class="hll">     <span class="p">{</span>
</span><span class="hll">       <span class="c1">// Record desired upward motion along the world y-axis:</span>
</span><span class="hll">       <span class="k">this</span><span class="p">.</span><span class="n">Movement</span> <span class="p">-=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">     <span class="p">}</span>
</span><span class="hll">     <span class="c1">// If I hold down the down arrow key,</span>
</span><span class="hll">     <span class="k">if</span> <span class="p">(</span><span class="k">event</span><span class="p">.</span><span class="n">Key</span> <span class="p">==</span> <span class="n">Keys</span><span class="p">.</span><span class="n">Down</span><span class="p">)</span>
</span><span class="hll">     <span class="p">{</span>
</span><span class="hll">       <span class="c1">// Record desired downward motion along the world y-axis:</span>
</span>       <span class="k">this</span><span class="p">.</span><span class="n">Movement</span> <span class="p">-=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span> <span class="p">-</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="c1">// If I hold down the right arrow key,</span>
     <span class="k">if</span> <span class="p">(</span><span class="k">event</span><span class="p">.</span><span class="n">Key</span> <span class="p">==</span> <span class="n">Keys</span><span class="p">.</span><span class="n">Right</span><span class="p">)</span>
     <span class="p">{</span>
       <span class="c1">// Record desired rightward motion along the world x-axis:</span>
       <span class="k">this</span><span class="p">.</span><span class="n">Movement</span> <span class="p">-=</span>  <span class="n">Real3</span><span class="p">(</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="c1">// If I hold down the left arrow key,</span>
     <span class="k">if</span> <span class="p">(</span><span class="k">event</span><span class="p">.</span><span class="n">Key</span> <span class="p">==</span> <span class="n">Keys</span><span class="p">.</span><span class="n">Left</span><span class="p">)</span>
     <span class="p">{</span>
       <span class="c1">// Record desired leftward motion along the world x-axis:</span>
       <span class="k">this</span><span class="p">.</span><span class="n">Movement</span> <span class="p">-=</span>  <span class="n">Real3</span><span class="p">(-</span><span class="m">1.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
     <span class="p">}</span>
   <span class="p">}</span>

   <span class="n">function</span> <span class="nf">OnLogicUpdate</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">UpdateEvent</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="c1">// Apply the recorded movement to our Transform</span>
     <span class="k">this</span><span class="p">.</span><span class="n">Owner</span><span class="p">.</span><span class="n">Transform</span><span class="p">.</span><span class="n">Translation</span> <span class="p">+=</span> <span class="k">this</span><span class="p">.</span><span class="n">Movement</span> <span class="p">*</span> <span class="k">event</span><span class="p">.</span><span class="n">Dt</span> <span class="p">*</span> <span class="k">this</span><span class="p">.</span><span class="n">Speed</span><span class="p">;</span>
   <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>You now have an efficient, keyboard-controlled, event-based Player Controller script.</p>
<p>So far, we&#8217;ve been making player controllers that only takes input from the keyboard. But what if you wanted to make a game where the player is controlled by the mouse? Let&#8217;s see if we can make a smooth, working mouse-based player controller with just a few changes to our <code class="docutils literal"><span class="pre">PlayerController</span></code> component.</p>
</div>
<div class="section" id="mouse-events">
<h2>Mouse Events</h2>
<p>As in the Keyboard Events section directly above, all we&#8217;ll need to use is the MouseDown event. MouseDown is dispatched onto the <code class="xref cpp cpp-type docutils literal"><span class="pre">space</span></code> when either the left or right mouse button is pressed.</p>
<p>This time, the logic will change extensively, but instead of adding more, we&#8217;ll be removing a significant portion of the script:</p>
<ul class="simple">
<li>Update the <code class="docutils literal"><span class="pre">PlayerController</span></code> script with the following code:</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre><span></span> <span class="k">class</span> <span class="nc">PlayerController</span> <span class="p">:</span> <span class="n">ZilchComponent</span>
 <span class="p">{</span>
   <span class="c1">//Variable to set the speed of the Player</span>
<span class="na">   [Property]</span>
   <span class="kt">var</span> <span class="n">Speed</span> <span class="p">:</span> <span class="n">Real</span> <span class="p">=</span> <span class="m">5.0</span><span class="p">;</span>

<span class="hll">   <span class="c1">//The position we want the player to move to</span>
</span><span class="hll">   <span class="kt">var</span> <span class="n">TargetPosition</span>  <span class="p">:</span> <span class="n">Real3</span><span class="p">;</span>
</span>
   <span class="n">function</span> <span class="nf">Initialize</span><span class="p">(</span><span class="n">init</span> <span class="p">:</span> <span class="n">CogInitializer</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="n">Zero</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Space</span><span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">LogicUpdate</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">OnLogicUpdate</span><span class="p">);</span>
<span class="hll">     <span class="c1">//Listen for the MouseDown event</span>
</span><span class="hll">     <span class="n">Zero</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Space</span><span class="p">,</span> <span class="n">Events</span><span class="p">.</span><span class="n">MouseDown</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">OnMouseDown</span><span class="p">);</span>
</span><span class="hll">   <span class="p">}</span>
</span>
   <span class="n">function</span> <span class="nf">OnMouseDown</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">ViewportMouseEvent</span><span class="p">)</span>
<span class="hll">   <span class="p">{</span>
</span><span class="hll">     <span class="c1">//Target position is set to the world-point in the level derived from the mouse&#39;s</span>
</span><span class="hll">     <span class="c1">//current position on the screen</span>
</span><span class="hll">     <span class="k">this</span><span class="p">.</span><span class="n">TargetPosition</span> <span class="p">=</span> <span class="k">event</span><span class="p">.</span><span class="n">CameraViewport</span><span class="p">.</span><span class="n">ScreenToWorldZPlane</span><span class="p">(</span><span class="k">event</span><span class="p">.</span><span class="n">Position</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
</span><span class="hll">   <span class="p">}</span>
</span><span class="hll">
</span>   <span class="n">function</span> <span class="nf">OnLogicUpdate</span><span class="p">(</span><span class="k">event</span> <span class="p">:</span> <span class="n">UpdateEvent</span><span class="p">)</span>
<span class="hll">   <span class="p">{</span>
</span><span class="hll">     <span class="c1">// Move the player from its current position to the TargetPosition using linear interpolation</span>
</span><span class="hll">     <span class="k">this</span><span class="p">.</span><span class="n">Owner</span><span class="p">.</span><span class="n">Transform</span><span class="p">.</span><span class="n">Translation</span> <span class="p">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">Lerp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Owner</span><span class="p">.</span><span class="n">Transform</span><span class="p">.</span><span class="n">Translation</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">TargetPosition</span><span class="p">,</span> <span class="k">event</span><span class="p">.</span><span class="n">Dt</span> <span class="p">*</span> <span class="k">this</span><span class="p">.</span><span class="n">Speed</span><span class="p">);</span>
</span><span class="hll">   <span class="p">}</span>
</span><span class="hll"> <span class="p">}</span>
</span></pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>When you click anywhere on the level with the mouse, the player will move to that point. Let&#8217;s break down what exactly is happening in the code to cause this behavior.</p>
<p>The <code class="docutils literal"><span class="pre">OnMouseDown()</span></code> response function only has one line of code. It sets our new <code class="docutils literal"><span class="pre">TargetPosition</span></code> variable to the world-point in the level at the point where the mouse cursor was when it was clicked. Both MouseDown and MouseUp are <code class="xref cpp cpp-type docutils literal"><span class="pre">ViewportMouseEvent`</span></code>-type events, meaning that they send information about the mouse as it applies to the viewport (which, for the time being, you can just consider as the portion of the screen where the game is being played). The mouse&#8217;s position on the viewport is passed into a function called <code class="docutils literal"><span class="pre">ScreenToWorldPlaneZ</span></code>, which translates this position to a world-point (which of type <code class="xref cpp cpp-type docutils literal"><span class="pre">Real3</span></code>) in the level that we can use. This is how we get the position we want the player to move to.</p>
<p>In <code class="docutils literal"><span class="pre">OnLogicUpdate</span></code>, we&#8217;re still updating the player&#8217;s translation, but this time we are setting it equal to a value that we get through a function called <code class="docutils literal"><span class="pre">Math.Lerp</span></code>. &#8220;Lerp&#8221; (short for &#8220;linear interpolation) is a math function that allows you to interpolate between two values (in our case, these values are the player&#8217;s current translation and the value of <code class="docutils literal"><span class="pre">TargetPosition</span></code>).</p>
<p>Interpolation is the act of getting a value at some percentage between a starting and target value. If we were to pass <code class="docutils literal"><span class="pre">1.0</span></code> into the last parameter of <code class="docutils literal"><span class="pre">Lerp</span></code> (the lerp percentage) the object would instantly jump to the target position. As we are calling <code class="docutils literal"><span class="pre">Lerp</span></code> in the <code class="docutils literal"><span class="pre">OnLogicUpdate</span></code> function, which runs the logic inside of it every frame, the object moves 100% of the distance between our two positions. Try it out for yourself by replacing <code class="docutils literal"><span class="pre">event.Dt</span> <span class="pre">*</span> <span class="pre">this.Speed</span></code> with <code class="docutils literal"><span class="pre">1.0</span></code>.</p>
<p>For our player controller, however, we don&#8217;t want to move nearly that fast. So, in the code-block above, we multiply our desired speed (<code class="docutils literal"><span class="pre">this.Speed</span></code>) by <code class="docutils literal"><span class="pre">event.Dt</span></code> in order to account for the fact that the object is being updated every <code class="docutils literal"><span class="pre">1/60th</span></code> of a second. This allows us to scale <code class="docutils literal"><span class="pre">this.Speed</span></code> by the rate of time at which the game is being updated. In plain English, this means we are moving the object approximately 0.08% of the distance between the two points 60 times a second, which still gets us there pretty quickly. This results in a smooth movement at a given speed per second instead jumping positions each frame.</p>
<p>And now you know how to implement a mouse-based, event-driven player controller.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Events3.html" class="btn btn-neutral float-right" title="Events 3" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Events1.html" class="btn btn-neutral" title="Events" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, DigiPen Institute of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../cdn.mathjax.org/mathjax/latest/MathJaxdda6.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<script src="../../_static/js/extjquery.js"></script>



</body>

<!-- Mirrored from zero.digipen.edu/Tutorials/Scripting/Events2.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 27 Dec 2022 22:35:18 GMT -->
</html>