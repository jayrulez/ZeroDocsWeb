<!-- this is a global static patch html file  -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from zero.digipen.edu/Tutorials/Gameplay/Input/Gamepad.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 27 Dec 2022 23:58:10 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Gamepad &mdash; Zero Engine 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Zero Engine 1.0 documentation" href="../../../index-2.html"/>
        <link rel="up" title="Input" href="index.html"/>
        <link rel="next" title="Mouse Input" href="MouseInput.html"/>
        <link rel="prev" title="Input" href="index.html"/>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30697525-2', 'auto');
  ga('send', 'pageview');

</script>



  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index-2.html" class="icon icon-home"> Zero Engine
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://zero.digipen.edu/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="../../../Launcher/ZeroLauncherSetup.html">Download Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../GettingStarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ZeroManual/index.html">Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../Editor/index.html">Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Scripting/index.html">Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Architecture/index.html">Architecture</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Gameplay</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ObjectCreation.html">Object Creation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Input</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Gamepad</a></li>
<li class="toctree-l4"><a class="reference internal" href="MouseInput.html">Mouse Input</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../VectorMath/index.html">Vector Math</a></li>
<li class="toctree-l3"><a class="reference internal" href="../LevelSwitching.html">Level Switching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../SameLevelCheckpoints.html">Level Checkpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../UsingTheSweptController.html">Using the Swept Controller</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Graphics/index.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Physics/index.html">Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../UI/index.html">User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../AI/index.html">Artificial Intelligence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Workshops/index.html">Classes &amp; Workshops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Support/index.html">Zero Engine Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://survey.digipen.edu/survey/index/sid/524363/newtest/Y/lang/en">Feedback Survey</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index-2.html">Zero Engine</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index-2.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Tutorials</a> &raquo;</li>
      
          <li><a href="../index.html">Gameplay</a> &raquo;</li>
      
          <li><a href="index.html">Input</a> &raquo;</li>
      
    <li>Gamepad</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/Tutorials/Gameplay/Input/Gamepad.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="searchtitle section" id="gamepad">
<span id="tutorialgamepad"></span><h1>Gamepad</h1>
<p class="searchdescription">One of the additions that can make your project feel like a quality professional title is support for gamepads. There are certain games that work best with controllers, such as when you want to have multiple players on one monitor. In the following lesson, we will demonstrating the steps required to add controller support for your Zero Engine game.</p>
<p>In the following examples we will be using an Xbox 360 controller, but the principles should work other controllers as well. If you are using an Xbox One controller, the drivers to use them can be found <a class="reference external" href="http://support.xbox.com/en-US/xbox-one/accessories/controller-pc-compatibility">here</a>.</p>
<div class="section" id="before-we-begin">
<h2>Before we Begin</h2>
<p>The first thing that we will need to do is make sure that our Xbox controllers are working and that the proper drivers are installed. Generally wired Xbox 360 controllers should work out of the box, but wireless controllers may require additional drivers which should come with the USB dongle provided with it.</p>
</div>
<div class="section" id="setup">
<h2>Setup</h2>
<p><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/LauncherNewProject.html#manualcreatenewproject"><span>Create a New Project</span></a></p>
<ul class="simple">
<li>Add a new level named: TitleScreen</li>
<li>Create a text object by going to <strong>Create | Create Sprite Text</strong>.<ul>
<li>Select the Sprite Text object and change the <strong>Position</strong> to <em>Centered</em>.</li>
</ul>
</li>
<li>Once that&#8217;s finished change the <strong>Text</strong> to &#8220;Press Start to Begin&#8221;</li>
</ul>
<p><img alt="Gamepad01" src="../../../_images/Gamepad01.png" /></p>
</div>
<div class="section" id="checking-for-gamepad-input">
<h2>Checking for Gamepad Input</h2>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/ResourceAdding.html#manualresourceadding"><span>Add a new ZilchScript resource</span></a> Named: &#8216;TitleScreenInput&#8217;</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nx">TitleScreenInput</span> <span class="o">:</span> <span class="nx">ZilchComponent</span>
<span class="p">{</span>
    <span class="p">[</span><span class="nx">Property</span><span class="p">]</span>
    <span class="k">var</span> <span class="nx">GameLevel</span> <span class="o">:</span> <span class="nx">Level</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">e</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">var</span> <span class="nx">gamepad</span> <span class="o">=</span> <span class="nx">Zero</span><span class="p">.</span><span class="nx">Gamepads</span><span class="p">.</span><span class="nx">GetGamePad</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span> <span class="nx">gamepad</span><span class="p">.</span><span class="nx">IsButtonPressed</span><span class="p">(</span> <span class="nx">Buttons</span><span class="p">.</span><span class="nx">Start</span> <span class="p">)</span> <span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">Console</span><span class="p">.</span><span class="nx">WriteLine</span><span class="p">(</span><span class="s2">&quot;StartGame&quot;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="p">.</span><span class="nx">LoadLevel</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">GameLevel</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Create an empty game object by going to <strong>Create | Create Transform</strong>. Give the object a name of &#8220;Input&#8221;.<ul>
<li>Attach the TitleScreenInput component to the object.</li>
</ul>
</li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save your project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>Of course, we haven&#8217;t initialized the GameLevel variable yet so nothing will happen; but if all goes well when you press the Start button you should see it display our console output.</p>
<p><img alt="Gamepad02" src="../../../_images/Gamepad02.png" /></p>
<hr class="docutils" />
<blockquote>
<div>There may be times in which you&#8217;d like to just check if any key has been pressed rather than just Start. You can use Buttons.AnyButton instead.</div></blockquote>
</div>
<hr class="docutils" />
<div class="section" id="level-2-setup">
<h2>Level 2 Setup</h2>
<p>Next, let&#8217;s make the level the title screen will go to
<strong>Gameplay Level</strong></p>
<ul class="simple">
<li>Add a new level named: Gameplay</li>
<li>Create a new sprite object by going to <strong>Create | Create Sprite</strong>.
*   Rename this sprite to &#8216;Player&#8217;.</li>
</ul>
<p><img alt="Gamepad03" src="../../../_images/Gamepad03.png" /></p>
</div>
<div class="section" id="adding-player-movement-using-the-dpad">
<h2>Adding Player Movement Using the DPad</h2>
<p>Keeping this simple example in mind, we can extend this capability. We want to write a script to control our player. For this first example, let&#8217;s use the directional pad (also known as the DPad).</p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/ResourceAdding.html#manualresourceadding"><span>Add a new ZilchScript resource</span></a> Named: &#8216;PlayerController&#8217;</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nx">PlayerController</span> <span class="o">:</span> <span class="nx">ZilchComponent</span>
<span class="p">{</span>
    <span class="p">[</span><span class="nx">Property</span><span class="p">]</span>
    <span class="c1">//Modifier on the speed of our player</span>
    <span class="k">var</span> <span class="nx">Speed</span> <span class="o">:</span> <span class="nx">Real</span> <span class="o">=</span> <span class="mf">5.0</span><span class="o">;</span>

    <span class="c1">// The gamepad that our player is using</span>
    <span class="k">var</span> <span class="nx">Controller</span><span class="o">:</span><span class="nx">Gamepad</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">Controller</span> <span class="o">=</span> <span class="nx">Zero</span><span class="p">.</span><span class="nx">Gamepads</span><span class="p">.</span><span class="nx">GetGamePad</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">local</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>

        <span class="c1">// If the controller is on and plugged in, let&#39;s use it</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">IsActive</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">IsButtonPressed</span><span class="p">(</span><span class="nx">Buttons</span><span class="p">.</span><span class="nx">DpadUpFiltered</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="nx">movement</span> <span class="o">+=</span> <span class="nx">local</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">IsButtonPressed</span><span class="p">(</span><span class="nx">Buttons</span><span class="p">.</span><span class="nx">DpadDownFiltered</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="nx">movement</span> <span class="o">+=</span> <span class="nx">local</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">IsButtonPressed</span><span class="p">(</span><span class="nx">Buttons</span><span class="p">.</span><span class="nx">DpadLeftFiltered</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="nx">movement</span> <span class="o">+=</span> <span class="nx">local</span> <span class="nx">Real3</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">IsButtonPressed</span><span class="p">(</span><span class="nx">Buttons</span><span class="p">.</span><span class="nx">DpadRightFiltered</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="nx">movement</span> <span class="o">+=</span> <span class="nx">local</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Apply the movement onto our transform</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Transform</span><span class="p">.</span><span class="nx">Translation</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">Normalize</span><span class="p">(</span><span class="nx">movement</span><span class="p">)</span> <span class="o">*</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">Speed</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Attach the PlayerController component to the Player object.</li>
<li>Back in our TitleScreen level go back to the Input object and set the GameLevel property to the &#8216;Gameplay&#8217; level.</li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save your project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p><img alt="Gamepad04" src="../../../_images/Gamepad04.gif" /></p>
<p>Now when we start the game and press Start it will take us directly into the game and we can then move using the DPad!</p>
</div>
<div class="section" id="reading-from-thumbsticks">
<h2>Reading from Thumbsticks</h2>
<p>However, most games don&#8217;t use dpads for movement but instead use the left thumbsticks. Let&#8217;s see how to rewrite the previous code to reflect that.</p>
<ul class="simple">
<li>Inside the PlayerController script change the OnLogicUpdate function to the following:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>  <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">local</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>

       <span class="c1">// If the controller is on and plugged in, let&#39;s use it</span>
       <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">IsActive</span><span class="p">)</span>
       <span class="p">{</span>
<span class="hll">           <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">LeftStick</span><span class="p">.</span><span class="nx">X</span><span class="o">;</span>
</span><span class="hll">           <span class="nx">movement</span><span class="p">.</span><span class="nx">Y</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">LeftStick</span><span class="p">.</span><span class="nx">Y</span><span class="o">;</span>
</span>       <span class="p">}</span>

       <span class="c1">// Apply the movement onto our transform</span>
<span class="hll">       <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Transform</span><span class="p">.</span><span class="nx">Translation</span> <span class="o">+=</span> <span class="nx">movement</span> <span class="o">*</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">Speed</span><span class="o">;</span>
</span>   <span class="p">}</span>
</pre></div>
</div>
<p>LeftStick is a Real2 which contains a value from -1 to 1 with the direction the left thumbstick is pointing in the X and Y axis. Note that I removed the normalize in this case because I want to allow the player to move slower if they want.</p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save your project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p><img alt="Gamepad05" src="../../../_images/Gamepad05.gif" /></p>
<p>Now you&#8217;ll see it move a lot smoother in whatever direction we want.</p>
</div>
<div class="section" id="two-player-input">
<h2>Two Player Input</h2>
<p>Of course one of the best reasons to have gamepad support is the fact that we can have multiple players on the same computer. Let&#8217;s learn how we can add a second player to our previous example:</p>
<ul class="simple">
<li>Inside the PlayerController script add/modify the following highlighted lines of code:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>   <span class="kd">class</span> <span class="nx">PlayerController</span> <span class="o">:</span> <span class="nx">ZilchComponent</span>
   <span class="p">{</span>
<span class="hll">       <span class="p">[</span><span class="nx">Property</span><span class="p">]</span>
</span><span class="hll">       <span class="c1">//Index of which player is controlling this Game Object</span>
</span><span class="hll">       <span class="k">var</span> <span class="nx">PlayerIndex</span> <span class="o">:</span> <span class="nx">Integer</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span>
       <span class="p">[</span><span class="nx">Property</span><span class="p">]</span>
       <span class="c1">//Modifier on the speed of our player</span>
       <span class="k">var</span> <span class="nx">Speed</span> <span class="o">:</span> <span class="nx">Real</span> <span class="o">=</span> <span class="mf">5.0</span><span class="o">;</span>

       <span class="c1">// The gamepad that our player is using</span>
       <span class="k">var</span> <span class="nx">Controller</span><span class="o">:</span><span class="nx">Gamepad</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

       <span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
       <span class="p">{</span>
<span class="hll">           <span class="k">this</span><span class="p">.</span><span class="nx">Controller</span> <span class="o">=</span> <span class="nx">Zero</span><span class="p">.</span><span class="nx">Gamepads</span><span class="p">.</span><span class="nx">GetGamePad</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">PlayerIndex</span><span class="p">);</span>
</span>           <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
       <span class="p">}</span>

       <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">local</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>

           <span class="c1">// If the controller is on and plugged in, let&#39;s use it</span>
           <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">IsActive</span><span class="p">)</span>
           <span class="p">{</span>
               <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">LeftStick</span><span class="p">.</span><span class="nx">X</span><span class="o">;</span>
               <span class="nx">movement</span><span class="p">.</span><span class="nx">Y</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">LeftStick</span><span class="p">.</span><span class="nx">Y</span><span class="o">;</span>
           <span class="p">}</span>

           <span class="c1">// Apply the movement onto our transform</span>
           <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Transform</span><span class="p">.</span><span class="nx">Translation</span> <span class="o">+=</span> <span class="nx">movement</span> <span class="o">*</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">Speed</span><span class="o">;</span>
       <span class="p">}</span>
   <span class="p">}</span>
</pre></div>
</div>
<p>In this instance we are making the controller index that this component uses a variable. Now we can create new players and give them their own indices.</p>
<ul class="simple">
<li>Go back into the Gameplay level and select our Player object in the Objects tab. Change his Translation to (-10,0,0).</li>
<li>Copy (Ctrl+C) and paste (Ctrl+V) the object and change our newly created one&#8217;s Name to Player2 and it&#8217;s translation to (10,0,0). Inside the PlayerController component change the <strong>Player Index</strong> property to 1. Under the Sprite component change the Color to a red color (to tell the difference between the objects).</li>
</ul>
<p><img alt="Gamepad06" src="../../../_images/Gamepad06.png" /></p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save your project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p><img alt="Gamepad07" src="../../../_images/Gamepad07.gif" /></p>
<p>And with that we now have input from two separate controllers!</p>
</div>
<div class="section" id="flicking">
<h2>Flicking</h2>
<p>A flicking event occurs whenever the player moves a directional stick in a sudden direction. This could be useful to have in your game for something like tumbling out of the way. However, you will not know by default what stick to use by default. Let&#8217;s learn how to work with it next:</p>
<ul class="simple">
<li>Add the following line to the Initialize function in the PlayerController function:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>   <span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">this</span><span class="p">.</span><span class="nx">Controller</span> <span class="o">=</span> <span class="nx">Zero</span><span class="p">.</span><span class="nx">Gamepads</span><span class="p">.</span><span class="nx">GetGamePad</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">PlayerIndex</span><span class="p">);</span>
       <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
<span class="hll">       <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Controller</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">GamepadStickFlicked</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnGamepadStickFlicked</span><span class="p">);</span>
</span>   <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Next add the following function:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">OnGamepadStickFlicked</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="nx">GamepadEvent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">local</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>

    <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">FlickDirection</span><span class="p">.</span><span class="nx">X</span><span class="o">;</span>
    <span class="nx">movement</span><span class="p">.</span><span class="nx">Y</span> <span class="o">+=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">FlickDirection</span><span class="p">.</span><span class="nx">Y</span><span class="o">;</span>

    <span class="c1">//Right thumbstick, Left is 1</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">FlickedStick</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// &quot;Teleport&quot; to a further away location</span>
        <span class="c1">// (note no Dt, so it&#39;ll be approx 60x further than normal)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Transform</span><span class="p">.</span><span class="nx">Translation</span> <span class="o">+=</span> <span class="nx">movement</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">Speed</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save your project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p><img alt="Gamepad08" src="../../../_images/Gamepad08.gif" /></p>
<p>Now if you flick your right thumbstick you will jump in whatever direction you pushed it into!</p>
</div>
<div class="section" id="class-overview">
<h2>Class Overview</h2>
<p>When dealing with Gamepads, there are three classes to look into:</p>
<ul class="simple">
<li><strong>Gamepads</strong> - The collection of gamepads inside of the game</li>
<li><strong>Gamepad</strong> - The gamepad object itself</li>
<li><strong>GamepadEvent</strong> - Events that the game objects can trigger</li>
</ul>
</div>
<div class="section" id="more-information">
<h2>More Information</h2>
<p>Find out more here:</p>
<ul class="simple">
<li><a class="reference external" href="../../../ZeroManual/CodeReference/Reference/Gamepads.html">Gamepads Class</a></li>
<li><a class="reference external" href="../../../ZeroManual/CodeReference/Reference/Gamepad.html">Gamepad Class</a></li>
<li><a class="reference external" href="../../../ZeroManual/CodeReference/Reference/GamepadEvent.html">GamepadEvent Class</a></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="MouseInput.html" class="btn btn-neutral float-right" title="Mouse Input" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Input" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, DigiPen Institute of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../cdn.mathjax.org/mathjax/latest/MathJaxdda6.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<script src="../../../_static/js/extjquery.js"></script>



</body>

<!-- Mirrored from zero.digipen.edu/Tutorials/Gameplay/Input/Gamepad.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 27 Dec 2022 23:58:12 GMT -->
</html>