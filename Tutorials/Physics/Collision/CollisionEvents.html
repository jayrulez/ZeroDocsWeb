<!-- this is a global static patch html file  -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from zero.digipen.edu/Tutorials/Physics/Collision/CollisionEvents.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 27 Dec 2022 23:58:48 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Collision Events &mdash; Zero Engine 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Zero Engine 1.0 documentation" href="../../../index-2.html"/>
        <link rel="up" title="Collision" href="index.html"/>
        <link rel="next" title="Ray Casting" href="../PhysicsCasting/RayCasting.html"/>
        <link rel="prev" title="Collision" href="index.html"/>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30697525-2', 'auto');
  ga('send', 'pageview');

</script>



  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index-2.html" class="icon icon-home"> Zero Engine
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://zero.digipen.edu/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="../../../Launcher/ZeroLauncherSetup.html">Download Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../GettingStarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ZeroManual/index.html">Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../Editor/index.html">Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Scripting/index.html">Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Architecture/index.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Gameplay/index.html">Gameplay</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Graphics/index.html">Graphics</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Physics</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Collision</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Collision Events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../PhysicsCasting/RayCasting.html">Ray Casting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PhysicsEffects/PhysicsEffects.html">Regions &amp; Physics Effects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../UI/index.html">User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../AI/index.html">Artificial Intelligence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Workshops/index.html">Classes &amp; Workshops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Support/index.html">Zero Engine Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://survey.digipen.edu/survey/index/sid/524363/newtest/Y/lang/en">Feedback Survey</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index-2.html">Zero Engine</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index-2.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Tutorials</a> &raquo;</li>
      
          <li><a href="../index.html">Physics</a> &raquo;</li>
      
          <li><a href="index.html">Collision</a> &raquo;</li>
      
    <li>Collision Events</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/Tutorials/Physics/Collision/CollisionEvents.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="searchtitle section" id="collision-events">
<span id="tutorialcollisionevents"></span><h1>Collision Events</h1>
<p class="searchdescription">This lesson covers basic collision, collision events, checking for collision with specific objects.</p>
<div class="section" id="create-a-new-project">
<h2>Create a New Project</h2>
<p><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/LauncherNewProject.html#manualcreatenewproject"><span>Create a New Project</span></a></p>
</div>
<div class="section" id="level-setup">
<h2>Level Setup</h2>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SelectObject.html#manualselectobject"><span>Select the LevelSettings object</span></a></li>
<li>In the Properties Window<ul>
<li><a class="reference internal" href="../../../ZeroManual/Editor/AddRemoveComponent.html#removecomponent"><span>Remove the Drag Component</span></a></li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/AddRemoveComponent.html#removecomponent"><span>Remove the Gravity Component</span></a></li>
</ul>
</li>
</ul>
<p><strong>Ball Object</strong></p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/Commands.html#manualcommands"><span>Command</span></a> : <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create ‣ Create Sprite</span></li>
<li>In the Properties Window<ul>
<li>Set Name to: <code class="docutils literal"><span class="pre">Ball</span></code></li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/AddRemoveComponent.html#manualaddremovecomponents"><span>Add a RigidBody component</span></a></li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/AddRemoveComponent.html#manualaddremovecomponents"><span>Add a SphereCollider component</span></a></li>
<li>Under Transform<ul>
<li>Set Translation to: <code class="docutils literal"><span class="pre">[-5,</span> <span class="pre">0,</span> <span class="pre">0]</span></code></li>
</ul>
</li>
<li>Under Sprite<ul>
<li>Set SpriteSource to: <code class="docutils literal"><span class="pre">Circle</span></code></li>
</ul>
</li>
<li>Under RigidBody<ul>
<li>Set DynamicState to: <code class="docutils literal"><span class="pre">Kinematic</span></code></li>
</ul>
</li>
<li>Under SphereCollider<ul>
<li>Set Radius to: <code class="docutils literal"><span class="pre">0.5</span></code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Block Object</strong></p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/Commands.html#manualcommands"><span>Command</span></a> : <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create ‣ Create Sprite</span></li>
<li>In the Properties Window<ul>
<li>Set Name to: <code class="docutils literal"><span class="pre">Block</span></code></li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/AddRemoveComponent.html#manualaddremovecomponents"><span>Add a RigidBody component</span></a></li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/AddRemoveComponent.html#manualaddremovecomponents"><span>Add a BoxCollider component</span></a></li>
<li>Under Transform<ul>
<li>Set Translation to: <code class="docutils literal"><span class="pre">[3,</span> <span class="pre">0,</span> <span class="pre">0]</span></code></li>
<li>Set Scale to: <code class="docutils literal"><span class="pre">[2,</span> <span class="pre">2,</span> <span class="pre">2]</span></code></li>
</ul>
</li>
<li>Under Sprite<ul>
<li>Set Color to:<code class="docutils literal"><span class="pre">[R:</span> <span class="pre">255,</span> <span class="pre">G:</span> <span class="pre">255,</span> <span class="pre">B:</span> <span class="pre">255,</span> <span class="pre">A:</span> <span class="pre">0.10]</span></code> <cite>to make it transparent</cite></li>
</ul>
</li>
<li>Under RigidBody<ul>
<li>Set DynamicState to: <code class="docutils literal"><span class="pre">Static</span></code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>BigBlock Object</strong></p>
<ul class="simple">
<li>Press <code class="docutils literal"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">D</span></code> to duplicate the Block object we just created</li>
<li>In the Properties Window<ul>
<li>Set Name to: <code class="docutils literal"><span class="pre">BigBlock</span></code></li>
<li>Under Transform<ul>
<li>Set Translation to: <code class="docutils literal"><span class="pre">[8,</span> <span class="pre">0,</span> <span class="pre">0]</span></code></li>
<li>Set Scale to: <code class="docutils literal"><span class="pre">[3,</span> <span class="pre">3,</span> <span class="pre">3]</span></code></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>Here what our level should look like:</p>
<p><img alt="GWLevelSetup" src="../../../_images/GWLevelSetup.png" /></p>
</div>
<div class="section" id="simple-movement">
<h2>Simple Movement</h2>
<ul>
<li><p class="first"><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/StopGame.html#manualstopgame"><span>Stop the Game</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/ResourceAdding.html#manualresourceadding"><span>Add a new ZilchScript resource</span></a> named: <code class="docutils literal"><span class="pre">Movement</span></code></p>
</li>
<li><p class="first"><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SelectObject.html#manualselectobject"><span>Select the Ball object</span></a></p>
</li>
<li><p class="first">In the Properties Window</p>
<ul>
<li><p class="first"><a class="reference internal" href="../../../ZeroManual/Editor/AddRemoveComponent.html#manualaddremovecomponents"><span>Add the Movement script component</span></a> that we just created to the Ball object:</p>
<p><img alt="PWBallAddMovement" src="../../../_images/PWBallAddMovement.png" /></p>
</li>
</ul>
</li>
<li><p class="first">In the <strong>Movement</strong> script</p>
<ul class="simple">
<li>Update the <strong>Movement</strong> class with the following code:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nx">Movement</span> <span class="o">:</span> <span class="nx">ZilchComponent</span>
<span class="p">{</span>
    <span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Connect to the LogicUpdate event:</span>
        <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Get current position:</span>
        <span class="k">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Transform</span><span class="p">.</span><span class="nx">Translation</span><span class="o">;</span>
        <span class="c1">// Move to the right:</span>
        <span class="nx">position</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span> <span class="o">*</span> <span class="mf">10.0</span><span class="o">;</span>

        <span class="c1">// If past a certain point,</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">position</span><span class="p">.</span><span class="nx">X</span> <span class="o">&gt;=</span> <span class="mf">12.0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// reset the position.</span>
            <span class="nx">position</span><span class="p">.</span><span class="nx">X</span> <span class="o">=</span> <span class="o">-</span><span class="mf">5.0</span><span class="o">;</span>
        <span class="p">}</span>

        <span class="c1">// Update Translation with changes:</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Transform</span><span class="p">.</span><span class="nx">Translation</span> <span class="o">=</span> <span class="nx">position</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>The Ball object should be moving to the right, but then colliding and getting stuck at the first block. In order to make it pass through, we are going to make our blocks have <strong>ghost</strong> colliders.</p>
<p><img alt="GWStuck" src="../../../_images/GWStuck.png" /></p>
<div class="sidebar">
<p class="first sidebar-title">Using Ghost Colliders</p>
<p>Using ghost colliders can be rather handy when you want to create areas that trigger behavior but that don&#8217;t actual affect movement.</p>
<p class="last">Here we use it to trigger a color change, in a  game you could use it to trigger the spawn of enemies, in the lesson <span class="xref std std-ref">level checkpoints</span> we use them to mark checkpoints in case the player dies.</p>
</div>
<p><strong>Ghost colliders</strong> allow us to still know when collisions and add mass to an object without actually colliding.</p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SelectObject.html#manualselectobject"><span>Select the Block object</span></a></li>
<li>In the Properties Window<ul>
<li>Under BoxCollider<ul>
<li>Set Ghost to: <code class="docutils literal"><span class="pre">True</span></code></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SelectObject.html#manualselectobject"><span>Select the BigBlock object</span></a></li>
<li>In the Properties Window<ul>
<li>Under BoxCollider<ul>
<li>Set Ghost to: <code class="docutils literal"><span class="pre">True</span></code></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>Now it passes through them.</p>
<p><img alt="GhostBlocks" src="../../../_images/GhostBlocks.gif" /></p>
<p>Our next step is to detect when the Ball collides with another object. When this happens, a <strong>collision event</strong> is dispatched, or sent out.</p>
</div>
<div class="section" id="id1">
<h2>Collision Events</h2>
<p>We discussed how LogicUpdate event is a type of UpdateEvent. <strong>CollisionEvent</strong> is another type of event. Three events fall under the CollisionEvent category: CollisionStarted, CollisionEnded, and CollisionPersisted.</p>
<ol class="arabic simple">
<li><strong>CollisionPersisted</strong> is when the object was and still is colliding.</li>
<li><strong>CollisionEnded</strong> is when the object was but is no longer colliding.</li>
<li><strong>CollisionStarted</strong> is when the object is colliding but was not colliding previously.</li>
</ol>
<ul>
<li><p class="first"><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/StopGame.html#manualstopgame"><span>Stop the Game</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/ResourceAdding.html#manualresourceadding"><span>Add a new ZilchScript resource</span></a> named: <code class="docutils literal"><span class="pre">CollisionLogic</span></code></p>
</li>
<li><p class="first"><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SelectObject.html#manualselectobject"><span>Select the Ball object</span></a></p>
</li>
<li><p class="first">In the Properties Window</p>
<ul>
<li><p class="first"><a class="reference internal" href="../../../ZeroManual/Editor/AddRemoveComponent.html#manualaddremovecomponents"><span>Add a CollisionLogic component</span></a></p>
<p><img alt="PWBallAddCollisionLogic" src="../../../_images/PWBallAddCollisionLogic.png" /></p>
</li>
</ul>
</li>
<li><p class="first">In the <strong>CollisionLogic</strong> script</p>
<ul class="simple">
<li>Update the <strong>CollisionLogic</strong> class with the following code:<ul>
<li>Update <strong>Initialize</strong> class with the following code:</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>  <span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
  <span class="p">{</span>
<span class="hll">      <span class="c1">// Connect to CollisionStarted event</span>
</span><span class="hll">      <span class="c1">//           when I      get a CollisionStarted event call my OnCollisionStarted function</span>
</span><span class="hll">      <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">CollisionStarted</span><span class="o">,</span>     <span class="k">this</span><span class="p">.</span><span class="nx">OnCollisionStarted</span><span class="p">);</span>
</span>  <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><ul class="first">
<li><ul class="first">
<li>Add the <strong>OnCollisionStarted</strong> function:</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">OnCollisionStarted</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">CollisionEvent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Change model color to Orange.</span>
      <span class="c1">// Color orange is    [R:1, G: 0.5, B:0, A:1.0].</span>
    <span class="k">var</span> <span class="nx">orange</span> <span class="o">=</span>       <span class="nx">Real4</span><span class="p">(</span><span class="mf">1.0</span><span class="o">,</span>    <span class="mf">0.5</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span>   <span class="mf">1.0</span><span class="p">);</span>
      <span class="c1">// Apply color to the Sprite:</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Sprite</span><span class="p">.</span><span class="nb">Color</span> <span class="o">=</span> <span class="nx">orange</span><span class="o">;</span>

<span class="p">}</span>
</pre></div>
</div>
<p>In this code, we connect to the CollisionStarted event and provide our OnCollisionStarted function as the <strong>callback</strong> function. Notice that we are connecting to the <strong>Owner</strong> object and <cite>not the Space</cite> like we do for LogicUpdate events. This is because the Owner object is <strong>dispatching</strong>, or sending out, the CollisionEvent. In our OnCollisionStarted function, we change the model color to visually show that we have collided.</p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p><img alt="CollisionLogicOrange" src="../../../_images/CollisionLogicOrange.gif" /></p>
<p>The color of the Ball object changes to orange when we collide. Next, we will change the color back to white when we are no longer colliding by using the CollisionEnded event.</p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/StopGame.html#manualstopgame"><span>Stop the Game</span></a></li>
<li>In the <strong>CollisionLogic</strong> script<ul>
<li>Update the <strong>Initialize</strong> function by appending the following:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>      <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">CollisionStarted</span><span class="o">,</span>     <span class="k">this</span><span class="p">.</span><span class="nx">OnCollisionStarted</span><span class="p">);</span>
<span class="hll">      <span class="c1">// Connect to CollisionEnded  event</span>
</span><span class="hll">      <span class="c1">//           when I      get a CollisionEnded event call my OnCollisionEnded function</span>
</span><span class="hll">      <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">CollisionEnded</span><span class="o">,</span>     <span class="k">this</span><span class="p">.</span><span class="nx">OnCollisionEnded</span><span class="p">);</span>
</span></pre></div>
</div>
<ul class="simple">
<li><ul class="first">
<li>Add the following function to the <strong>CollisionLogic</strong> class:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">OnCollisionEnded</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">CollisionEvent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Change model color to back to white.</span>
      <span class="c1">// White is     [R:1,  G:1, B:1, A:1].</span>
    <span class="k">var</span> <span class="nx">white</span> <span class="o">=</span>  <span class="nx">Real4</span><span class="p">(</span><span class="mf">1.0</span><span class="o">,</span>  <span class="mf">1.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="p">);</span>
      <span class="c1">// Apply color to the Sprite:</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Sprite</span><span class="p">.</span><span class="nb">Color</span> <span class="o">=</span> <span class="nx">white</span><span class="o">;</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p><img alt="CollisionLogicOrangeWhite" src="../../../_images/CollisionLogicOrangeWhite.gif" /></p>
<p>The color of the Ball object now changes back to white when we stop colliding. What if we wanted to check for collision with a specific object?</p>
</div>
<div class="section" id="checking-for-collision-with-specific-objects">
<h2>Checking for Collision with Specific Objects</h2>
<div class="sidebar">
<p class="first sidebar-title">Why Are They Not Colliding?</p>
<p>In all these checks, we are using visuals to help up determine if there is a collision. What if there isn&#8217;t a collision? How can we tell what is wrong?</p>
<p>While there are a multitude of possible reasons a quick way to start is simply to ask the physics engine.</p>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="k">var</span> <span class="nx">space</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">;</span>
<span class="k">var</span> <span class="nx">physics</span> <span class="o">=</span> <span class="nx">space</span><span class="p">.</span><span class="nx">PhysicsSpace</span><span class="o">;</span>
<span class="nx">Console</span><span class="p">.</span><span class="nx">WriteLine</span><span class="p">(</span>
  <span class="nx">physics</span><span class="p">.</span><span class="nx">WhyAreTheyNotColliding</span><span class="p">(</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="o">,</span>
    <span class="nx">space</span><span class="p">.</span><span class="nx">FindObjectByName</span><span class="p">(</span><span class="s2">&quot;BigBlock&quot;</span><span class="p">)));</span>
</pre></div>
</div>
<p>The function <code class="docutils literal"><span class="pre">WhyAreTheyNotColliding</span></code> returns a string that you can print via Console.WriteLine to receive possible answers such as:</p>
<ul class="last simple">
<li>Colliders did not pass broadphase, they are too far apart. (Maybe separating on the z axis?).</li>
<li>They didn&#8217;t pass collision detection, they aren&#8217;t actually colliding.</li>
<li>One collider is marked ghost. Both colliders send events</li>
<li>CogB doesn&#8217;t have a collider.</li>
</ul>
</div>
<p>Now we will go over colliding with specific objects by getting information about the object we collided with from the <strong>CollisionEvent</strong> . Similar to how an UpdateEvent has Dt and CurrentTime as accessible data members, every CollisionEvent provides a way of getting the other object that we either were colliding with, are still colliding with, or just started colliding with.</p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/StopGame.html#manualstopgame"><span>Stop the Game</span></a></li>
<li>In the <strong>CollisionLogic</strong> script<ul>
<li>Update the <strong>CollisionLogic</strong> &#8216;s <strong>OnCollisionStarted</strong> function with the following code:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>  <span class="kd">function</span> <span class="nx">OnCollisionStarted</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">CollisionEvent</span><span class="p">)</span>
  <span class="p">{</span>
<span class="hll">    <span class="c1">// Get the object we collided with:</span>
</span><span class="hll">    <span class="k">var</span> <span class="nx">otherObject</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">OtherObject</span><span class="o">;</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1">// If we collided with the block,</span>
</span><span class="hll">    <span class="k">if</span> <span class="p">(</span><span class="nx">otherObject</span><span class="p">.</span><span class="nx">Name</span> <span class="o">==</span> <span class="s2">&quot;Block&quot;</span><span class="p">)</span>
</span><span class="hll">    <span class="p">{</span>
</span>        <span class="c1">// change model color to Orange.</span>
          <span class="c1">// Orange is    [R:1, G: 0.5, B:0, A:1].</span>
        <span class="k">var</span> <span class="nx">orange</span> <span class="o">=</span> <span class="nx">Real4</span><span class="p">(</span><span class="mf">1.0</span><span class="o">,</span>    <span class="mf">0.5</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="p">);</span>
          <span class="c1">// Apply color to the Sprite:</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Sprite</span><span class="p">.</span><span class="nb">Color</span> <span class="o">=</span> <span class="nx">orange</span><span class="o">;</span>
<span class="hll">    <span class="p">}</span>
</span>  <span class="p">}</span>
</pre></div>
</div>
<p>Notice we use the <strong>CollisionEvent.</strong> <strong>OtherObject</strong> property of the CollisionEvent in order to get the other object from the CollisionEvent.</p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p><img alt="ByName" src="../../../_images/ByName.gif" /></p>
<p>The color of the Ball object <strong>only</strong> changes to orange whenever we collide with the Block object. Now we know how to use specific information about the other colliding object in order to react differently when colliding with different objects.</p>
</div>
<div class="section" id="on-your-own">
<h2>On Your Own</h2>
<p><strong>Disabling Collision Events at Run-Time</strong></p>
<p>Disabling collision events at run-time is pretty simple. Collider components have a boolean value called <strong>SendsEvents.</strong> If we set SendsEvents to False, the object will not dispatch collision events. Even if we connect to the event, we still can&#8217;t get an event that was never sent.</p>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/StopGame.html#manualstopgame"><span>Stop the Game</span></a></li>
<li>In the <strong>CollisionLogic</strong> script<ul>
<li>Update the <strong>Initialize</strong> function by appending the following:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>  <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">CollisionEnded</span><span class="o">,</span>     <span class="k">this</span><span class="p">.</span><span class="nx">OnCollisionEnded</span><span class="p">);</span>
<span class="hll">  <span class="c1">// Connect to the LogicUpdate event fired by the space:</span>
</span><span class="hll">  <span class="c1">//           when the space  gets a LogicUpdate event   call my OnLogicUpdate function</span>
</span><span class="hll">  <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span>     <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span>        <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
</span></pre></div>
</div>
<ul class="simple">
<li><ul class="first">
<li>Add the <strong>OnLogicUpdate</strong> function by appending the following code:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// If we are holding down space,</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Space</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="c1">// do NOT send the event.</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">Collider</span><span class="p">.</span><span class="nx">SendsEvents</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="c1">// Otherwise, if we aren&#39;t holding down space,</span>
    <span class="p">{</span>
        <span class="c1">// make sure we dispatch collision events.</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">Collider</span><span class="p">.</span><span class="nx">SendsEvents</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/SavingProject.html#manualsavingproject"><span>Save the project</span></a> and <a class="reference internal" href="../../../ZeroManual/Editor/EditorCommands/RunTheGame.html#manualrunthegame"><span>run the game</span></a></li>
</ul>
<p>If you hold down Space, you&#8217;ll see that the Ball object no longer changes color because collision events are no longer being sent.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../PhysicsCasting/RayCasting.html" class="btn btn-neutral float-right" title="Ray Casting" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Collision" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, DigiPen Institute of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../cdn.mathjax.org/mathjax/latest/MathJaxdda6.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<script src="../../../_static/js/extjquery.js"></script>



</body>

<!-- Mirrored from zero.digipen.edu/Tutorials/Physics/Collision/CollisionEvents.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 27 Dec 2022 23:58:56 GMT -->
</html>