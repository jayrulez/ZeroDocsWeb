<!-- this is a global static patch html file  -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from zero.digipen.edu/Workshops/2014/UsingTheSweptController.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Dec 2022 00:23:48 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using the Swept Controller &mdash; Zero Engine 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Zero Engine 1.0 documentation" href="../../index-2.html"/>
        <link rel="up" title="Introduction to 2D Video Game Programming" href="index.html"/>
        <link rel="next" title="Following Camera" href="FollowingCamera.html"/>
        <link rel="prev" title="Ai Shooting and Movement" href="SimpleAi.html"/>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30697525-2', 'auto');
  ga('send', 'pageview');

</script>



  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index-2.html" class="icon icon-home"> Zero Engine
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://zero.digipen.edu/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="../../Launcher/ZeroLauncherSetup.html">Download Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../GettingStarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ZeroManual/index.html">Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Community/index.html">Community</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Classes &amp; Workshops</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../GAM100/index.html">GAM100</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Proj101/index.html">Project 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/index.html">Video Game Development Level 1 - 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/TeachersGuide.html">Teacher&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2015/index.html">Video Game Development Level 1 - 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2015/TeachersGuide.html">Teacher&#8217;s Guide</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Introduction to 2D Video Game Programming</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="EditorUI.html">Editor UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="GameObjects.html">Game Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="AddingComponents.html">Adding Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="Resources.html">Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="PhysicsEffects.html">Regions &amp; Physics Effects</a></li>
<li class="toctree-l3"><a class="reference internal" href="Text.html">Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting.html">Scripting</a></li>
<li class="toctree-l3"><a class="reference internal" href="ScriptingEvents.html">Scripting Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="CollisionEvents.html">Collision Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="Sprites.html">Sprites</a></li>
<li class="toctree-l3"><a class="reference internal" href="Properties.html">Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="Archetypes.html">Archetypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectCreation.html">Object Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Orientation.html">Rotating Towards a Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="FireAtMouse.html">Firing At the Mouse</a></li>
<li class="toctree-l3"><a class="reference internal" href="Levels.html">Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="ParticleSystems.html">Particle Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="SimpleAi.html">Ai Shooting and Movement</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using the Swept Controller</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="FollowingCamera.html">Following Camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="AnimatedSpritesSheets.html">Animated Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="TileEditorAndSpriteSheets.html">Tile Editor and Sprite Sheets</a></li>
<li class="toctree-l3"><a class="reference internal" href="CameraParallax.html">Camera Parallax</a></li>
<li class="toctree-l3"><a class="reference internal" href="SameLevelCheckpoints.html">Level Checkpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="HeadsUpDisplay.html">Heads Up Display</a></li>
<li class="toctree-l3"><a class="reference internal" href="UserInterface.html">User Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="Actions.html">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="Area.html">Area Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="Audio.html">Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectStore.html">Saving and Loading Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="Commands.html">Executing Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="CreateProject.html">Create a New Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="RunTheGame.html">Running the Game</a></li>
<li class="toctree-l3"><a class="reference internal" href="StopGame.html">Close the Game Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="SavingProject.html">Saving the Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="SelectObject.html">Selecting an Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="AddComponent.html">Add a Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="ResourceAdding.html">Adding a Resource</a></li>
<li class="toctree-l3"><a class="reference internal" href="SwitchingMode2Dto3D.html">Switching from Mode2D to Mode3D</a></li>
<li class="toctree-l3"><a class="reference internal" href="UsingTheVoid.html">Using the Void</a></li>
<li class="toctree-l3"><a class="reference internal" href="P1.html">Project 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="P2.html">Project 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="P3.html">Project 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="P4.html">Project 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="P5.html">Project 5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="TeachersGuide.html">Teacher&#8217;s Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Support/index.html">Zero Engine Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://survey.digipen.edu/survey/index/sid/524363/newtest/Y/lang/en">Feedback Survey</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index-2.html">Zero Engine</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index-2.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Classes &amp; Workshops</a> &raquo;</li>
      
          <li><a href="index.html">Introduction to 2D Video Game Programming</a> &raquo;</li>
      
    <li>Using the Swept Controller</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/Workshops/2014/UsingTheSweptController.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="searchtitle section" id="using-the-swept-controller">
<span id="usingthesweptcontroller2014"></span><h1>Using the Swept Controller</h1>
<p class="searchdescription">This lesson shows how to use the SweptController stock script to create a player that has physics-based abilities, such as jumping and collision.</p>
<div class="section" id="create-a-new-project">
<h2>Create a New Project</h2>
<p><a class="reference internal" href="CreateProject.html#createnewproject2014"><span>Create a New Project</span></a></p>
</div>
<div class="section" id="level-setup">
<h2>Level Setup</h2>
<p><strong>Ground Object</strong></p>
<ul class="simple">
<li><a class="reference internal" href="Commands.html#commands2014"><span>Command</span></a>: <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create ‣ Create Sprite</span></li>
<li>In Properties Window<ul>
<li>Set Name to: &#8216;Ground&#8217;</li>
<li><a class="reference internal" href="AddComponent.html#addcomponent2014"><span>Add a BoxCollider Component</span></a></li>
<li>Under Transform<ul>
<li>Set the Translation to:[0, 0, 0]</li>
<li>Set the Scale to:[10, 1, 1]</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Platform Object</strong></p>
<ul>
<li><p class="first"><a class="reference internal" href="Commands.html#commands2014"><span>Command</span></a>: <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create ‣ Create Sprite</span></p>
</li>
<li><p class="first">In Properties Window</p>
<ul>
<li><p class="first">Set Name to: &#8216;Platform&#8217;</p>
</li>
<li><p class="first"><a class="reference internal" href="AddComponent.html#addcomponent2014"><span>Add a BoxCollider Component</span></a></p>
</li>
<li><p class="first">Under Transform</p>
<ul class="simple">
<li>Set the Translation to:[4, 4, 0]</li>
<li>Set the Scale to:[5, 1, 1]</li>
</ul>
<p>
<img alt="CP0_LevelSetupWeb" src="../../_images/CP0_41.png" />
</p>
<p><!--
<a class="reference internal" href="../../_images/CP0_41.png"><img alt="CP0_LevelSetupBook" src="../../_images/CP0_41.png" style="height: 3.0in;" /></a>
--></p>
</li>
</ul>
</li>
</ul>
<p></p>
</div>
<div class="section" id="acquiring-stock-scripts">
<h2>Acquiring Stock Scripts</h2>
<p>Generally, Stock Scripts are obtained through the <a class="reference internal" href="UsingTheVoid.html#usingthevoid2014"><span>Void</span></a> as it has the latest versions. However, to ensure compatibility with the instructions provided in this lesson, we recommend using the file here:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference download internal" href="../../_downloads/SweptController.z.z"><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">SweptController</span></code></a></li>
</ul>
</div></blockquote>
<p></p>
<p></p>
</div>
<div class="section" id="implementing-stock-scripts">
<h2>Implementing Stock Scripts</h2>
<p>Next we will import the provided platformer scripts into our project.</p>
<ul class="simple">
<li>Go to Platformer_Resources via your File Explorer</li>
<li>Drag and Drop SweptController into the Zero Editor</li>
</ul>
<p>You should now find the SweptController under ZilchScript tag in the Library Window.</p>
<ul class="simple">
<li>Open up the Code for SweptController</li>
</ul>
<p>It is not the responsibility of the high-level programmer to know how this code works.  We just need to be able to integrate it correctly.</p>
<p>If you look at the top of the code, you will see the instructions that we need to use.  We will come back to this once are done creating the player.</p>
<p><strong>Player Object</strong></p>
<ul>
<li><p class="first"><a class="reference internal" href="Commands.html#commands2014"><span>Command</span></a>: <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create ‣ Create Sprite</span></p>
</li>
<li><p class="first">In Properties Window</p>
<ul>
<li><p class="first">Set Name to: &#8216;Player&#8217;</p>
</li>
<li><p class="first"><a class="reference internal" href="AddComponent.html#addcomponent2014"><span>Add a BoxCollider Component</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="AddComponent.html#addcomponent2014"><span>Add a RigidBody Component</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="AddComponent.html#addcomponent2014"><span>Add a SweptController Component</span></a></p>
</li>
<li><p class="first">Under Transform</p>
<ul class="simple">
<li>Set the Translation to: [0, 1, 0]</li>
</ul>
</li>
<li><p class="first">Under RigidBody</p>
<ul class="simple">
<li>Set AllowSleep to: False</li>
</ul>
<p>
<img alt="CP0_LevelSetupPlayerWeb" src="../../_images/CP0_31.png" />
</p>
<p><!--
<a class="reference internal" href="../../_images/CP0_31.png"><img alt="CP0_LevelSetupPlayerBook" src="../../_images/CP0_31.png" style="height: 3.0in;" /></a>
--></p>
</li>
</ul>
</li>
</ul>
<p></p>
<p>Next we will implement the PlayerController using the SweptController.</p>
<ul class="simple">
<li><a class="reference internal" href="ResourceAdding.html#resourceadding2014"><span>Add a new ZilchScript resource</span></a> named: &#8216;PlayerController&#8217;</li>
<li>Go back to SweptController</li>
</ul>
<p>Now we need to follow the instructions at the top of the SweptController.</p>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="c1">// Usage:</span>
<span class="c1">// The user will need to make their own script for peripheral input.</span>
<span class="hll"><span class="c1">// Each LogicUpdate, the input script should determine the direction of</span>
</span><span class="hll"><span class="c1">// desired movement (does not need to be normalized) and pass it to the</span>
</span><span class="hll"><span class="c1">// Update function of this script, along with the Dt from the UpdateEvent.</span>
</span>
<span class="c1">// Character controller is independent of physics update.</span>
<span class="c1">// The RigidBody is expected to be Kinematic when using this controller.</span>
</pre></div>
</div>
<p>This tells us we need to:</p>
<p>Step 1: Connect to the built-in LogicUpdate event</p>
<p>Step 2: In the LogicUpdate event callback</p>
<ul>
<li><p class="first">Step 2a: Generate a movement vector</p>
</li>
<li><p class="first">Step 2b: Call the SweptController&#8217;s Update function <br /> Passing:</p>
<blockquote>
<div><ul class="simple">
<li>(2b.i)  the movement vector <br /> and</li>
<li>(2b.ii) the Dt variable (Provided by the UpdateEvent parameter of the LogicUpdate event callback)</li>
</ul>
<p><br /></p>
</div></blockquote>
</li>
</ul>
<p>Change the <strong>PlayerController</strong> script to the following code:</p>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Step 1</span>
<span class="hll">    <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
</span><span class="p">}</span>

<span class="c1">// Step 2</span>
<span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Step 2a</span>
<span class="hll">    <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
</span>
    <span class="c1">// Step 2b</span>
<span class="hll">    <span class="c1">// at the end, update</span>
</span>    <span class="c1">//                                2b.i      2b.ii</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Update</span><span class="p">(</span><span class="nx">movement</span><span class="o">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span><span class="p">);</span>
</span><span class="p">}</span>
</pre></div>
</div>
<p></p>
<p>Now we can change the movement by checking for key presses.</p>
<ul class="simple">
<li>Change the <strong>PlayerController</strong> script to the following code:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>

<span class="hll">    <span class="c1">// control left, right, and up</span>
</span><span class="hll">    <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Left</span><span class="p">))</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">        <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">-=</span> <span class="mf">1.0</span><span class="o">;</span>
</span><span class="hll">    <span class="p">}</span>
</span>
<span class="hll">    <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Right</span><span class="p">))</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">        <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="mf">1.0</span><span class="o">;</span>
</span><span class="hll">    <span class="p">}</span>
</span>
<span class="hll">    <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsPressed</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">))</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Jump</span><span class="p">();</span>
</span><span class="hll">    <span class="p">}</span>
</span>
    <span class="c1">// at the end, update</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Update</span><span class="p">(</span><span class="nx">movement</span><span class="o">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="SelectObject.html#selectobject2014"><span>Select the Player object</span></a></li>
<li>In the Properties Window<ul>
<li><a class="reference internal" href="AddComponent.html#addcomponent2014"><span>Add the PlayerController component</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="RunTheGame.html#runthegame2014"><span>Run the game</span></a><ul>
<li>Use the controls</li>
</ul>
</li>
</ul>
<p></p>
<p>At this point, all the controls are implemented for the Player, but the user cannot control the height of the player.  We want to tell the SweptController to stop jumping when the key is released.</p>
<ul class="simple">
<li>Change the <strong>PlayerController</strong> script to the following code:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>

    <span class="c1">// control left, right, and up</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Left</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">-=</span> <span class="mf">1.0</span><span class="o">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Right</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="mf">1.0</span><span class="o">;</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsPressed</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Jump</span><span class="p">();</span>
    <span class="p">}</span>

<span class="hll">    <span class="c1">// if the jump key is not pressed, find the point of release and stop jumping</span>
</span><span class="hll">    <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">)</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Jumping</span><span class="p">)</span>
</span><span class="hll">        <span class="p">{</span>
</span><span class="hll">            <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">JumpCancel</span><span class="p">();</span>
</span><span class="hll">        <span class="p">}</span>
</span><span class="hll">    <span class="p">}</span>
</span>
    <span class="c1">// at the end, update</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Update</span><span class="p">(</span><span class="nx">movement</span><span class="o">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="RunTheGame.html#runthegame2014"><span>Run the game</span></a><ul>
<li>Use the controls</li>
</ul>
</li>
</ul>
<p>By quickly tapping the <code class="docutils literal"><span class="pre">Up</span> <span class="pre">Arrow</span></code> you can see the player&#8217;s jump height is lower.</p>
<p>Now we can continue following the SweptController instructions:</p>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="c1">// Usage:</span>
<span class="c1">// The user will need to make their own script for peripheral input.</span>
<span class="c1">// Each LogicUpdate, the input script should determine the direction of</span>
<span class="c1">// desired movement (does not need to be normalized) and pass it to the</span>
<span class="c1">// Update function of this script, along with the Dt from the UpdateEvent.</span>

<span class="c1">// Character controller is independent of physics update.</span>
<span class="hll"><span class="c1">// The RigidBody is expected to be Kinematic when using this controller.</span>
</span></pre></div>
</div>
<ul>
<li><p class="first"><a class="reference internal" href="SelectObject.html#selectobject2014"><span>Select the Player object</span></a></p>
</li>
<li><p class="first">In Properties Window</p>
<ul>
<li><p class="first">Under RigidBody</p>
<ul class="simple">
<li>Set DynamicState to: Kinematic</li>
</ul>
<p><img alt="CP0_RigidBody" src="../../_images/CP0_11.png" /></p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="changeable-properties">
<h2>Changeable Properties</h2>
<p>By running the game, you will notice everything should work correctly, but the player can&#8217;t jump high enough to reach the upper platform.  We can change the JumpSpeed for the Player.</p>
<ul>
<li><p class="first"><a class="reference internal" href="SelectObject.html#selectobject2014"><span>Select the Player object</span></a></p>
</li>
<li><p class="first">In Properties Window</p>
<ul>
<li><p class="first">Under SweptController</p>
<ul class="simple">
<li>Set JumpSpeed to: 10</li>
</ul>
<p><img alt="CP0_SweptControllerJumpSpeed" src="../../_images/CP0_21.png" /></p>
</li>
</ul>
</li>
</ul>
<p>Now we know how to integrate the SweptController to make a platform character controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">orphan:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<!-- this is used as a file for inclusion in other .rst files --></div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="FollowingCamera.html" class="btn btn-neutral float-right" title="Following Camera" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="SimpleAi.html" class="btn btn-neutral" title="Ai Shooting and Movement" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, DigiPen Institute of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../cdn.mathjax.org/mathjax/latest/MathJaxdda6.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<script src="../../_static/js/extjquery.js"></script>



</body>

<!-- Mirrored from zero.digipen.edu/Workshops/2014/UsingTheSweptController.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Dec 2022 00:23:50 GMT -->
</html>