<!-- this is a global static patch html file  -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from zero.digipen.edu/Workshops/2015/Events.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Dec 2022 00:14:41 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Events &mdash; Zero Engine 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Zero Engine 1.0 documentation" href="../../index-2.html"/>
        <link rel="up" title="Video Game Development Level 1 - 2015" href="index.html"/>
        <link rel="next" title="Collision Events" href="CollisionEvents.html"/>
        <link rel="prev" title="Scripting 3" href="ArraysLoops.html"/>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30697525-2', 'auto');
  ga('send', 'pageview');

</script>



  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index-2.html" class="icon icon-home"> Zero Engine
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://zero.digipen.edu/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="../../Launcher/ZeroLauncherSetup.html">Download Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../GettingStarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ZeroManual/index.html">Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Community/index.html">Community</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Classes &amp; Workshops</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../GAM100/index.html">GAM100</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Proj101/index.html">Project 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/index.html">Video Game Development Level 1 - 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/TeachersGuide.html">Teacher&#8217;s Guide</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Video Game Development Level 1 - 2015</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Launcher.html">The Zero Launcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="EditorUI.html">Editor UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="GameObjects.html">Game Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="AddingComponents.html">Adding Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="Resources.html">Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="PhysicsEffects.html">Regions &amp; Physics Effects</a></li>
<li class="toctree-l3"><a class="reference internal" href="Text.html">Sprites and Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting.html">Scripting</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting2.html">Scripting 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="ArraysLoops.html">Scripting 3</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Events</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="CollisionEvents.html">Collision Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="Sprites.html">Sprites</a></li>
<li class="toctree-l3"><a class="reference internal" href="Archetypes.html">Archetypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectCreation.html">Object Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="2DRotation.html">2D Rotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Levels.html">Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="ParticleEffects.html">Particle Effects</a></li>
<li class="toctree-l3"><a class="reference internal" href="UsingTheSweptController.html">Using the Swept Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="FollowingCamera.html">Following Camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="AnimatedSpritesSheets.html">Animated Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="TileEditorAndSpriteSheets.html">Tile Editor and Sprite Sheets</a></li>
<li class="toctree-l3"><a class="reference internal" href="SameLevelCheckpoints.html">Level Checkpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="ParallaxBackground.html">Parallax Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="HeadsUpDisplay.html">Heads Up Display</a></li>
<li class="toctree-l3"><a class="reference internal" href="UserInterface.html">User Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="Actions.html">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="Audio.html">Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectStore.html">Saving and Loading Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="Random.html">Random</a></li>
<li class="toctree-l3"><a class="reference internal" href="VectorMath.html">Vector Math</a></li>
<li class="toctree-l3"><a class="reference internal" href="RayCasting.html">Ray Casting</a></li>
<li class="toctree-l3"><a class="reference internal" href="PracticalParticles.html">Particle Effects: Practical Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="Commands.html">Executing Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="LauncherNewProject.html">Create a New Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="RunTheGame.html">Running the Game</a></li>
<li class="toctree-l3"><a class="reference internal" href="StopGame.html">Close the Game Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="SavingProject.html">Saving the Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="SelectObject.html">Selecting Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="AddComponent.html">Adding &amp; Removing Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="ResourceAdding.html">Adding a Resource</a></li>
<li class="toctree-l3"><a class="reference internal" href="SwitchingMode2Dto3D.html">Switching from Mode2D to Mode3D</a></li>
<li class="toctree-l3"><a class="reference internal" href="UsingTheVoid.html">Using the Void</a></li>
<li class="toctree-l3"><a class="reference internal" href="Tags.html">Tags</a></li>
<li class="toctree-l3"><a class="reference internal" href="P1.html">Project 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="P2.html">Project 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="P3.html">Project 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="P4.html">Project 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="P5.html">Project 5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="TeachersGuide.html">Teacher&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2014/index.html">Introduction to 2D Video Game Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2014/TeachersGuide.html">Teacher&#8217;s Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Support/index.html">Zero Engine Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://survey.digipen.edu/survey/index/sid/524363/newtest/Y/lang/en">Feedback Survey</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index-2.html">Zero Engine</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index-2.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Classes &amp; Workshops</a> &raquo;</li>
      
          <li><a href="index.html">Video Game Development Level 1 - 2015</a> &raquo;</li>
      
    <li>Events</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/Workshops/2015/Events.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <!-- this is used as a file for inclusion in other .rst files --><div class="searchtitle section" id="events">
<span id="events2015"></span><h1>Events</h1>
<p class="searchdescription">Events are one of the most important features in Zero and are often used by other features in the engine. In this lesson we will cover <strong>Spaces</strong>, <strong>Game Loops</strong>, connecting to the <strong>LogicUpdate</strong> event, and some basic keyboard input.</p>
<div class="section" id="create-a-new-project">
<h2>Create a New Project</h2>
<p><a class="reference internal" href="LauncherNewProject.html#createnewproject2015"><span>Create a New Project</span></a></p>
</div>
<div class="section" id="level-setup">
<h2>Level Setup</h2>
<ul class="simple">
<li><a class="reference internal" href="Commands.html#commands2015"><span>Command</span></a> : <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create ‣ Create Sprite</span></li>
<li><a class="reference internal" href="SelectObject.html#selectobject2015"><span>Select the Sprite you created</span></a></li>
<li>In the Properties Window<ul>
<li>Set name to: Player</li>
</ul>
</li>
<li><a class="reference internal" href="SavingProject.html#savingproject2015"><span>Save the project</span></a></li>
</ul>
<p>Before we start talking about events there are a few topics we need to know about that will help us along the way.</p>
</div>
<div class="section" id="spaces">
<h2>Spaces</h2>
<p>A <strong>Space</strong> ,  like everything else in the engine, is still an object; however, unlike most game objects, <strong>Spaces</strong> do not represent an individual object. You may think of a <strong>Space</strong> as a container for a group of other objects, but more accurately it represents the real world space that a group of objects would inhabit if they existed in real life.</p>
<p>In a simple game you only have one space, which is where all your game objects go. Each space has its own instances of the core systems of the engine: graphics, physics, etc. Because of this, game objects in two different spaces will not collide or otherwise physically interact. Creating a separate space for UI game objects is one of the most common uses of multiple spaces in a game.</p>
<ul class="simple">
<li>Click anywhere in the Level Window</li>
<li>Press <code class="docutils literal"><span class="pre">Shift+S</span></code> or <span class="menuselection">Select ‣ Select Space</span> to bring up the properties of the current Space</li>
</ul>
<p></p>
<p>Notice that the Property Window shows the space that all the objects in this level are contained in. You should see that the object count is <code class="docutils literal"><span class="pre">5</span></code> because there are five objects in the level (the World Anchor is part of this number):</p>
<p><img alt="PWSpace" src="../../_images/PWSpace1.png" /></p>
<p>One of the nice feature of <strong>Spaces</strong> is that all game object that exist inside of a <strong>Space</strong> object have access to it inherently. This is very convenient and useful for events, and at times very dangerous, we will talk about this more in a future lesson.</p>
</div>
<div class="section" id="game-loops">
<h2>Game Loops</h2>
<p>In all games, there is a continuous element to the game play.
Consider <em>The Sims</em> for a moment.
The game continuously checks for player input, moves characters across the screen over several seconds, queues actions such as cleaning and eating to be done at the appropriate times, and more.</p>
<p>Using this example, you can break <em>The Sims</em> down into what is known in the games industry as a series of frames. Think of a single frame as one picture on a reel of film. When you string each of these frames together and play them back at a specific rate, you can see the movie that is on the film.</p>
<p>Much of the same idea applies to games. In our frames example, one frame consists of several common actions that are executed in a specific sequence. For instance, the game would first check for user input, then it would update the game logic that governs moving the characters, and finally, it would then draw that frame to the screen.</p>
<p>If this process of executing one frame of a game is looped at a specific rate, much like the film, the game comes alive and becomes real-time. This is precisely the concept of the game loop, where it loops the process of executing one frame of the game over and over again. It should be noted that in most games, as well as the Zero Engine, the game loop repeats at a rate of 60 frames per second. This is called the frame rate.</p>
<p>Basically, before drawing to the screen, the game engine&#8217;s systems perform several tasks such as: detecting user input, performing physics calculations, and handling game logic. These systems often communicate with each other through the use of events.</p>
<p></p>
</div>
<div class="section" id="id1">
<h2>Events</h2>
<p>Events are the main way that objects and components talk to each other in the Zero Engine, which follows a common programming pattern called the <strong>Event-Listener</strong> pattern. Events are messages that are sent to specific objects in reaction to something happening in the game. Like with any type of message, an Event often contains information about the circumstance that caused the Event to get dispatched. However, sometimes just the fact that the Event happened is all the information whoever is listening needs. Let&#8217;s take a look at the most commonly used Event in the engine, which uses both of the topics of Spaces and Game Loops.</p>
</div>
<div class="section" id="adding-the-playercontroller-zilchscript">
<h2>Adding the PlayerController ZilchScript</h2>
<ul class="simple">
<li><a class="reference internal" href="ResourceAdding.html#resourceadding2015"><span>Add a new ZilchScript resource</span></a> Named: <code class="docutils literal"><span class="pre">PlayerController</span></code></li>
<li>In the <strong>PlayerController</strong> script<ul>
<li>Update the <strong>PlayerController</strong> component with the following code:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nx">PlayerController</span> <span class="o">:</span> <span class="nx">ZilchComponent</span>
<span class="p">{</span>
    <span class="c1">// This function is called when the object is created</span>
    <span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Say hello:</span>
        <span class="nx">Console</span><span class="p">.</span><span class="nx">WriteLine</span><span class="p">(</span><span class="s2">&quot;Hello from Player&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">Console</span><span class="p">.</span><span class="nx">WriteLine</span><span class="p">(</span><span class="s2">&quot;updated&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-logicupdate-event">
<h2>The LogicUpdate Event</h2>
<p>When a space begins handling game logic, it dispatches an event to all the game objects who have connected to the <code class="docutils literal"><span class="pre">Events.LogicUpdate</span></code> event. This event is run during every logical frame and is generally used to run the game logic portion of the <strong>Game Loop</strong> discussed above. We want to have logic to update our objects every frame, so even without interaction, the game world can appear alive. This code we write, so that it can be called when an event is dispatched, is known as a <strong>CallBack</strong> function.</p>
<ul class="simple">
<li>Open the <strong>PlayerController</strong> script</li>
</ul>
<p>In the generated code you&#8217;ll see a function called OnLogicUpdate that accepts an event of type: <code class="docutils literal"><span class="pre">UpdateEvent</span></code>. This is the <strong>CallBack</strong> function we will connect to respond to the <code class="docutils literal"><span class="pre">UpdateEvent</span></code>.</p>
<ul class="simple">
<li><a class="reference internal" href="SavingProject.html#savingproject2015"><span>Save the project</span></a></li>
<li><a class="reference internal" href="SelectObject.html#selectobject2015"><span>Select the Player Object</span></a></li>
<li>In the Properties Window<ul>
<li><a class="reference internal" href="AddComponent.html#addcomponent2015"><span>Add a PlayerController component</span></a></li>
</ul>
</li>
</ul>
<p></p>
<p>This should be the output in the Console Window:</p>
<p>Console Output:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------- Begin Game  ----------------
Hello from Player
Level &#39;Level&#39; was loaded.
Loaded level 0.00s
</pre></div>
</div>
<p>We have yet to actually connect the <strong>OnLogicUpdate</strong> to respond to the <code class="docutils literal"><span class="pre">UpdateEvent</span></code> dispatched by the space so &#8220;updated&#8221; never gets printed; let&#8217;s do that now.</p>
</div>
<div class="section" id="connecting-to-logicupdate">
<h2>Connecting to LogicUpdate</h2>
<p>Remember that events are how the engine/objects/spaces inform you that something has happened and lets you decide what to do. When you want to respond to an event you need to connect to it. You connect a specific event that happens to a specific object to a specific function you&#8217;ve defined.</p>
<p>For example, lets say you connect your function, ApplyChanges() to the OKButton object&#8217;s ButtonUp event. When the user clicks the OKButton, the ButtonUp event will be <strong>dispatched</strong> on the OKButton. Since you are <strong>listening</strong> to the OKButton for this event, when it is <strong>dispatched</strong>, the function you connected to, ApplyChanges(), will be called.</p>
<p>It&#8217;s important to connect them correctly, so you don&#8217;t have your function called when you press the cancel button (wrong object) or when hovering over the button (wrong event).</p>
<p>We want to <strong>connect</strong> to our <strong>Space</strong> , which is where the <strong>LogicUpdate</strong> event is dispatched. We will have our <code class="docutils literal"><span class="pre">OnLogicUpdate</span></code> function called when we receive the event. To do this we will use the <code class="docutils literal"><span class="pre">Zero.Connect</span></code> function.</p>
<ul>
<li><p class="first">In your <strong>PlayerController</strong> script</p>
<ul class="simple">
<li>Replace the code in the <strong>Initialize</strong> function with the following code:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Connect to the LogicUpdate event fired by the space:</span>
    <span class="c1">//       when the space    gets a LogicUpdate event   call my OnLogicUpdate function</span>
    <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span>   <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span>        <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference internal" href="SavingProject.html#savingproject2015"><span>Save the project</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="RunTheGame.html#runthegame2015"><span>Run the game</span></a></p>
</li>
</ul>
<p></p>
<p>We now know that our <code class="docutils literal"><span class="pre">OnLogicUpdate</span></code> function is being called because the word <cite>updated</cite> is repeatedly being printed in the Console Window:</p>
<p>Console Output:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">updated</span>
<span class="n">updated</span>
<span class="n">updated</span>
<span class="n">updated</span>
<span class="n">updated</span>
<span class="n">updated</span>
<span class="n">updated</span>
<span class="n">updated</span>
<span class="n">updated</span>
<span class="n">updated</span>
</pre></div>
</div>
<p>Events send different event types. The LogicUpdate event sends an <strong>UpdateEvent</strong> which contains how much time has passed in the space (<strong>TimePassed</strong>) and the change in time from the previous frame to this frame (denoted by <strong>Dt</strong> to represent delta time) in <strong>seconds</strong>.</p>
<ul class="simple">
<li><a class="reference internal" href="StopGame.html#stopgame2015"><span>Stop the Game</span></a> if it is currently open</li>
<li>Open the <strong>PlayerController</strong> script</li>
<li>Replace the code in the <strong>OnLogicUpdate</strong> function with the following code:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>   <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
   <span class="p">{</span>
<span class="hll">       <span class="nx">Console</span><span class="p">.</span><span class="nx">WriteLine</span><span class="p">(</span><span class="s2">&quot;TimePassed: `event.TimePassed`&quot;</span><span class="p">);</span>
</span><span class="hll">       <span class="nx">Console</span><span class="p">.</span><span class="nx">WriteLine</span><span class="p">(</span><span class="s2">&quot;Updated with dt of: `event.Dt`&quot;</span><span class="p">);</span>
</span>   <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="RunTheGame.html#runthegame2015"><span>Run the game</span></a></li>
</ul>
<p>We should see the time passed (in seconds) is increasing by the Dt (delta time) of each frame:</p>
<p>Console Output:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------- Begin Game  ----------------
Compiling Zilch Library
Hello from Player
Level &#39;Level&#39; was loaded.
Loaded level 0.00s
TimePassed: 0.0159611
Updated with dt of: 0.0166567
TimePassed: 0.0340954
Updated with dt of: 0.0166567
TimePassed: 0.0510914
Updated with dt of: 0.0166567
TimePassed: 0.068136
Updated with dt of: 0.0166567
TimePassed: 0.0851685
Updated with dt of: 0.0166567
TimePassed: 0.102257
</pre></div>
</div>
<p></p>
</div>
<div class="section" id="keyboard-input">
<h2>Keyboard Input</h2>
<p>Now we will detect keyboard input in the <code class="docutils literal"><span class="pre">OnLogicUpdate</span></code> function. In the Zero Engine, we can use the <code class="docutils literal"><span class="pre">Zero.Keyboard.KeyIsPressed</span></code> function to detect user input. This function accepts a key id argument that is associated with specific keys on the keyboard.</p>
<p>Let&#8217;s detect if the Up arrow key is pressed:</p>
<ul class="simple">
<li><a class="reference internal" href="StopGame.html#stopgame2015"><span>Stop the Game</span></a></li>
<li>Open the <strong>PlayerController</strong> script</li>
<li>Update the <strong>OnLogicUpdate</strong> function with the following code:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>   <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
   <span class="p">{</span>
<span class="hll">       <span class="c1">// If I press the up arrow key,</span>
</span><span class="hll">       <span class="k">if</span> <span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsPressed</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">))</span>
</span><span class="hll">       <span class="p">{</span>
</span><span class="hll">           <span class="c1">// print confirmation it happened.</span>
</span><span class="hll">           <span class="nx">Console</span><span class="p">.</span><span class="nx">WriteLine</span><span class="p">(</span><span class="s2">&quot;Up Arrow Pressed&quot;</span><span class="p">);</span>
</span><span class="hll">       <span class="p">}</span>
</span>   <span class="p">}</span>
</pre></div>
</div>
<p>The Zero.Keyboard.KeyIsPressed function returns a <strong>Boolean</strong> value. This value can either be <strong>true</strong> or <strong>false</strong>; therefore, the function call can be used by the if statement as its boolean condition.</p>
<ul class="simple">
<li><a class="reference internal" href="SavingProject.html#savingproject2015"><span>Save the project</span></a> and <a class="reference internal" href="RunTheGame.html#runthegame2015"><span>run the game</span></a></li>
</ul>
<p>Now when you pressed the Up arrow key on the keyboard, it should print &#8220;Up Arrow Pressed&#8221; in the Console Window.</p>
<ul class="simple">
<li><a class="reference internal" href="StopGame.html#stopgame2015"><span>Stop the Game</span></a></li>
</ul>
</div>
<div class="section" id="frame-based-movement">
<h2>Frame-based Movement</h2>
<p>Up until now, we have been detecting input from the keyboard and printing to the Console Window. Now we are going to make our Player object move using code in our PlayerController script. We know from setting our properties in the editor that the <strong>Transform</strong> component is where our <strong>Translation</strong> (position) is held. Our Translation is stored as a 3D Vector. Now we will update the Translation vector inside the Transform component from within our PlayerController script.</p>
<p></p>
<p>Let&#8217;s make our Player move along the positive world y-axis when we press the Up arrow key:</p>
<ul class="simple">
<li>Open the <strong>PlayerController</strong> script</li>
<li>Update the <strong>OnLogicUpdate</strong> function with the following line of code:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>   <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="c1">// If I press the up arrow key,</span>
       <span class="k">if</span> <span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsPressed</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">))</span>
       <span class="p">{</span>
           <span class="c1">// print confirmation it happened.</span>
           <span class="nx">Console</span><span class="p">.</span><span class="nx">WriteLine</span><span class="p">(</span><span class="s2">&quot;Up Arrow Pressed&quot;</span><span class="p">);</span>
<span class="hll">           <span class="c1">// Move up along world y-axis.</span>
</span><span class="hll">           <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Transform</span><span class="p">.</span><span class="nx">Translation</span> <span class="o">+=</span>  <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
</span>       <span class="p">}</span>
   <span class="p">}</span>
</pre></div>
</div>
<p>With this code, we are adding a 3D vector to our Transform&#8217;s 3D translation vector. This should move our object in the positive direction along the world y-axis.</p>
<ul class="simple">
<li><a class="reference internal" href="SavingProject.html#savingproject2015"><span>Save the project</span></a> and <a class="reference internal" href="RunTheGame.html#runthegame2015"><span>run the game</span></a></li>
<li>Press the Up arrow key repeatedly</li>
</ul>
<p>Now in addition to printing, the Player object should be moving by one unit in the positive direction along the world y-axis. We have been checking for the up arrow key being <strong>pressed</strong>. Let&#8217;s check for if the up arrow key is being held <strong>down</strong>.</p>
<ul class="simple">
<li><a class="reference internal" href="StopGame.html#stopgame2015"><span>Stop the Game</span></a></li>
<li>Open the <strong>PlayerController</strong> script</li>
<li>In the <strong>OnLogicUpdate</strong> function, change <code class="docutils literal"><span class="pre">KeyIsPressed</span></code> to <code class="docutils literal"><span class="pre">KeyIsDown</span></code>:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="c1">// If I hold down the up arrow key,</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">))</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="SavingProject.html#savingproject2015"><span>Save the project</span></a> and <a class="reference internal" href="RunTheGame.html#runthegame2015"><span>run the game</span></a></li>
<li>Hold the up arrow key down</li>
</ul>
<p>The Player object continues moving as long as the Up arrow key is held down.</p>
<ul class="simple">
<li><a class="reference internal" href="StopGame.html#stopgame2015"><span>Stop the Game</span></a></li>
</ul>
<p></p>
<ul class="simple">
<li>Open the <strong>PlayerController</strong> script</li>
<li>change the <strong>OnLogicUpdate</strong> to the following code:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>   <span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
   <span class="p">{</span>
<span class="hll">      <span class="c1">// Have a place to record the total movement we want to make:</span>
</span><span class="hll">      <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span>  <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
</span><span class="hll">
</span><span class="hll">      <span class="c1">// If I hold down the up arrow key,</span>
</span><span class="hll">      <span class="k">if</span> <span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">))</span>
</span>      <span class="p">{</span>
          <span class="c1">// Record desired upward motion along the world y-axis:</span>
          <span class="nx">movement</span> <span class="o">+=</span>  <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="c1">// If I hold down the down arrow key,</span>
<span class="hll">      <span class="k">if</span> <span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Down</span><span class="p">))</span>
</span><span class="hll">      <span class="p">{</span>
</span>          <span class="c1">// Record desired downward motion along the world y-axis:</span>
<span class="hll">          <span class="nx">movement</span> <span class="o">+=</span>  <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
</span><span class="hll">      <span class="p">}</span>
</span><span class="hll">      <span class="c1">// If I hold down the right arrow key,</span>
</span><span class="hll">      <span class="k">if</span> <span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Right</span><span class="p">))</span>
</span><span class="hll">      <span class="p">{</span>
</span><span class="hll">          <span class="c1">// Record desired rightward motion along the world x-axis:</span>
</span><span class="hll">          <span class="nx">movement</span> <span class="o">+=</span>  <span class="nx">Real3</span><span class="p">(</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
</span><span class="hll">      <span class="p">}</span>
</span><span class="hll">      <span class="c1">// If I hold down the left arrow key,</span>
</span><span class="hll">      <span class="k">if</span> <span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Left</span><span class="p">))</span>
</span><span class="hll">      <span class="p">{</span>
</span><span class="hll">          <span class="c1">// Record desired leftward motion along the world x-axis:</span>
</span><span class="hll">          <span class="nx">movement</span> <span class="o">+=</span>  <span class="nx">Real3</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
</span><span class="hll">      <span class="p">}</span>
</span><span class="hll">
</span><span class="hll">      <span class="c1">// Apply the recorded movement to our Transform</span>
</span><span class="hll">      <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Transform</span><span class="p">.</span><span class="nx">Translation</span> <span class="o">+=</span> <span class="nx">movement</span><span class="o">;</span>
</span><span class="hll">   <span class="p">}</span>
</span></pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="SavingProject.html#savingproject2015"><span>Save the project</span></a> and <a class="reference internal" href="RunTheGame.html#runthegame2015"><span>run the game</span></a></li>
</ul>
<p>Now you can move the player up, down, left, and right; however it is moving incredibly fast. This is because currently the player is being moved one unit each frame, and at sixty frames per second the block is moving way to fast.</p>
<p></p>
<ul class="simple">
<li>Update the <strong>OnLogicUpdate</strong> with the following code:</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span>      <span class="c1">// If I hold down the left arrow key,</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Left</span><span class="p">))</span>
      <span class="p">{</span>
          <span class="c1">// Record desired leftward motion along the world x-axis:</span>
          <span class="nx">movement</span> <span class="o">+=</span>  <span class="nx">Real3</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="c1">// Apply the recorded movement to our Transform</span>
<span class="hll">      <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nb">Transform</span><span class="p">.</span><span class="nx">Translation</span> <span class="o">+=</span> <span class="nx">movement</span> <span class="o">*</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span><span class="o">;</span>
</span>   <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="SavingProject.html#savingproject2015"><span>Save the project</span></a> and <a class="reference internal" href="RunTheGame.html#runthegame2015"><span>run the game</span></a></li>
</ul>
<p>By multiplying our movement vector by Dt we can scale the speed to move the object at a time scale of units per second instead of units per frame. This is a far more practical way of moving objects and keeping them at a consistent timescale. If Dt is used consistently throughout the project it also makes it easy to do time sensitive effects such as slow motion.</p>
</div>
<div class="section" id="conclusions">
<h2>Conclusions</h2>
<p>Connecting to events is one of the most important things to learn in the engine. The Engine will send individual objects specific events based off what is happening in the game, events such as <strong>LogicUpdate</strong> and <strong>CollisionEvents</strong> (will be discussed in the next lesson) can drive a majority of your gameplay. Learning how to respond to the events correctly is core to your ability to function in the engine.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CollisionEvents.html" class="btn btn-neutral float-right" title="Collision Events" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ArraysLoops.html" class="btn btn-neutral" title="Scripting 3" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, DigiPen Institute of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../cdn.mathjax.org/mathjax/latest/MathJaxdda6.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<script src="../../_static/js/extjquery.js"></script>



</body>

<!-- Mirrored from zero.digipen.edu/Workshops/2015/Events.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Dec 2022 00:14:42 GMT -->
</html>