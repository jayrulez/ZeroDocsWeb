<!-- this is a global static patch html file  -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from zero.digipen.edu/Workshops/GAM100/UsingTheSweptController.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Dec 2022 00:12:22 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using the Swept Controller &mdash; Zero Engine 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Zero Engine 1.0 documentation" href="../../index-2.html"/>
        <link rel="up" title="GAM100" href="index.html"/>
        <link rel="next" title="Following Camera" href="FollowingCamera.html"/>
        <link rel="prev" title="Particle Effects" href="ParticleEffects.html"/>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30697525-2', 'auto');
  ga('send', 'pageview');

</script>



  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index-2.html" class="icon icon-home"> Zero Engine
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://zero.digipen.edu/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="../../Launcher/ZeroLauncherSetup.html">Download Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../GettingStarted/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ZeroManual/index.html">Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Community/index.html">Community</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Classes &amp; Workshops</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">GAM100</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Launcher.html">The Zero Launcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="EditorUI.html">Editor UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="GameObjects.html">Game Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="AddingComponents.html">Adding Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="VectorMath1.html">Vector Math, part 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="Hierarchies.html">Hierarchies</a></li>
<li class="toctree-l3"><a class="reference internal" href="Resources.html">Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="PhysicsEffects.html">Regions &amp; Physics Effects</a></li>
<li class="toctree-l3"><a class="reference internal" href="Sprites.html">Sprites</a></li>
<li class="toctree-l3"><a class="reference internal" href="Area.html">Area Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="Text.html">Sprite Text</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting1.html">Scripting 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting2.html">Scripting 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting3.html">Scripting 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="Scripting4.html">Scripting 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="HierarchiesInCode.html">Hierarchies in Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="Events1.html">Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="Events2.html">Events 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="Events3.html">Events 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="Events4.html">Events 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="CogPaths.html">Cog Paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="Archetypes.html">Archetypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="Spaces.html">Spaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectCreation.html">Object Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="VectorMath2.html">Vector Math, part 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="2DRotation.html">2D Rotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Levels.html">Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="ParticleEffects.html">Particle Effects</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using the Swept Controller</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="FollowingCamera.html">Following Camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="AnimatedSpritesSheets.html">Animated Player</a></li>
<li class="toctree-l3"><a class="reference internal" href="TileEditorAndSpriteSheets.html">Tile Editor and Sprite Sheets</a></li>
<li class="toctree-l3"><a class="reference internal" href="SameLevelCheckpoints.html">Level Checkpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="ParallaxBackground.html">Parallax Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="HeadsUpDisplay.html">Heads Up Display</a></li>
<li class="toctree-l3"><a class="reference internal" href="UserInterface.html">User Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="Actions.html">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="Audio.html">Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectStore.html">Saving and Loading Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Proj101/index.html">Project 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/index.html">Video Game Development Level 1 - 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/TeachersGuide.html">Teacher&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2015/index.html">Video Game Development Level 1 - 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2015/TeachersGuide.html">Teacher&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2014/index.html">Introduction to 2D Video Game Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2014/TeachersGuide.html">Teacher&#8217;s Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Support/index.html">Zero Engine Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://survey.digipen.edu/survey/index/sid/524363/newtest/Y/lang/en">Feedback Survey</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index-2.html">Zero Engine</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index-2.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Classes &amp; Workshops</a> &raquo;</li>
      
          <li><a href="index.html">GAM100</a> &raquo;</li>
      
    <li>Using the Swept Controller</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/Workshops/GAM100/UsingTheSweptController.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="searchtitle section" id="using-the-swept-controller">
<span id="usingthesweptcontrollergam100"></span><h1>Using the Swept Controller</h1>
<p class="searchdescription">This lesson shows how to use the SweptController stock script to create a player that has physics-based abilities, such as jumping and collision.</p>
<div class="section" id="learning-objectives">
<span id="usingthesweptcontrollerlearningobjectives"></span><h2>Learning Objectives</h2>
<ul class="simple">
<li>Understanding the usage of the <code class="docutils literal"><span class="pre">SweptController</span></code>.</li>
<li>Use of a Kinematic character controller.</li>
</ul>
<table border="1" class="vocabsection docutils">
<colgroup>
<col width="17%" />
<col width="29%" />
<col width="27%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="4">Vocabulary</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RigidBody</td>
<td>DynamicState</td>
<td>Dynamic</td>
<td>Kinematic</td>
</tr>
<tr class="row-odd"><td>Static</td>
<td>PlayerController</td>
<td>SweptController</td>
<td>Input Detection</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-a-new-project">
<h2>Create a New Project</h2>
<p><span class="xref std std-ref">CreateNewProject</span></p>
</div>
<div class="section" id="level-setup">
<h2>Level Setup</h2>
<p><strong>Ground Object</strong></p>
<ul class="simple">
<li><a class="reference internal" href="Commands.html#commandsgam100"><span>Command</span></a>: <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create ‣ Create Sprite</span></li>
<li>In Properties Window<ul>
<li>Set Name to: <code class="docutils literal"><span class="pre">Ground</span></code></li>
<li><a class="reference internal" href="AddComponent.html#addcomponentgam100"><span>Add a BoxCollider Component</span></a></li>
<li>Under Transform<ul>
<li>Set the Translation to: <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">0,</span> <span class="pre">0]</span></code></li>
<li>Set the Scale to: <code class="docutils literal"><span class="pre">[10,</span> <span class="pre">1,</span> <span class="pre">1]</span></code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Platform Object</strong></p>
<ul>
<li><p class="first"><a class="reference internal" href="Commands.html#commandsgam100"><span>Command</span></a>: <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create ‣ Create Sprite</span></p>
</li>
<li><p class="first">In Properties Window</p>
<ul>
<li><p class="first">Set Name to: <code class="docutils literal"><span class="pre">Platform</span></code></p>
</li>
<li><p class="first"><a class="reference internal" href="AddComponent.html#addcomponentgam100"><span>Add a BoxCollider Component</span></a></p>
</li>
<li><p class="first">Under Transform</p>
<ul>
<li><p class="first">Set the Translation to: <code class="docutils literal"><span class="pre">[4,</span> <span class="pre">4,</span> <span class="pre">0]</span></code></p>
</li>
<li><p class="first">Set the Scale to: <code class="docutils literal"><span class="pre">[5,</span> <span class="pre">1,</span> <span class="pre">1]</span></code></p>
<blockquote>
<div><blockquote>
<div><p><img alt="CP0_LevelSetupWeb" src="../../_images/CP0_44.png" /></p>
</div></blockquote>
<p><a class="reference internal" href="../../_images/CP0_44.png"><img alt="CP0_LevelSetupBook" src="../../_images/CP0_44.png" style="height: 2.5in;" /></a></p>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="implementing-stock-scripts">
<h2>Implementing Stock Scripts</h2>
<p>Next we will import the provided platformer scripts into our project.</p>
<ul class="simple">
<li>Download the <code class="docutils literal"><span class="pre">SweptCharacter</span></code> package from The Void.</li>
</ul>
<p>You should now find the SweptController under ZilchScript tag in the Library Window.</p>
<ul class="simple">
<li>Open up the Code for SweptController</li>
</ul>
<p>It is not the responsibility of the high-level programmer to know how this code works.  We just need to be able to integrate it correctly.</p>
<p>If you look at the top of the code, you will see the instructions that we need to use.  We will come back to this once are done creating the player.</p>
<p><strong>Player Object</strong></p>
<ul>
<li><p class="first"><a class="reference internal" href="Commands.html#commandsgam100"><span>Command</span></a>: <code class="docutils literal"><span class="pre">CreateSprite</span></code> or <span class="menuselection">Create ‣ Create Sprite</span></p>
</li>
<li><p class="first">In Properties Window</p>
<ul>
<li><p class="first">Set Name to: <code class="docutils literal"><span class="pre">Player</span></code></p>
</li>
<li><p class="first"><a class="reference internal" href="AddComponent.html#addcomponentgam100"><span>Add a BoxCollider Component</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="AddComponent.html#addcomponentgam100"><span>Add a RigidBody Component</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="AddComponent.html#addcomponentgam100"><span>Add a SweptController Component</span></a></p>
</li>
<li><p class="first">Under Transform</p>
<ul class="simple">
<li>Set the Translation to: <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">0]</span></code></li>
</ul>
</li>
<li><p class="first">Under RigidBody</p>
<ul>
<li><p class="first">Set AllowSleep to: <code class="docutils literal"><span class="pre">False</span></code></p>
<blockquote>
<div><blockquote>
<div><p><img alt="CP0_LevelSetupPlayerWeb" src="../../_images/CP0_34.png" /></p>
</div></blockquote>
<p><a class="reference internal" href="../../_images/CP0_34.png"><img alt="CP0_LevelSetupPlayerBook" src="../../_images/CP0_34.png" style="height: 2.5in;" /></a></p>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The first and foremost instruction in the SweptController script is:</p>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="c1">// The user will need to make their own script for peripheral input.</span>
</pre></div>
</div>
<p>This means we need to implement a PlayerController to use with our SweptController.</p>
<ul class="simple">
<li><a class="reference internal" href="ResourceAdding.html#resourceaddinggam100"><span>Add a new ZilchScript resource</span></a> named: <code class="docutils literal"><span class="pre">PlayerController</span></code></li>
<li>Go back to SweptController</li>
</ul>
<p>Now we need to follow the rest of the instructions at the top of the SweptController.</p>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="c1">// Usage:</span>
<span class="c1">// The user will need to make their own script for peripheral input.</span>
<span class="hll"><span class="c1">// Each LogicUpdate, the input script should determine the direction of</span>
</span><span class="hll"><span class="c1">// desired movement (does not need to be normalized) and pass it to the</span>
</span><span class="hll"><span class="c1">// Update function of this script, along with the Dt from the UpdateEvent.</span>
</span>
<span class="c1">// Character controller is independent of physics update.</span>
<span class="c1">// The RigidBody is expected to be Kinematic when using this controller.</span>
</pre></div>
</div>
<p>This tells us we need to:</p>
<p>Step 1: Connect to the built-in LogicUpdate event</p>
<p>Step 2: In the LogicUpdate event callback</p>
<ul>
<li><p class="first">Step 2a: Generate a movement vector</p>
</li>
<li><p class="first">Step 2b: Call the SweptController&#8217;s Update function <br /> Passing:</p>
<blockquote>
<div><ul class="simple">
<li>(2b.i)  the movement vector <br /> and</li>
<li>(2b.ii) the Dt variable (Provided by the UpdateEvent parameter of the LogicUpdate event callback)</li>
</ul>
<p><br /></p>
</div></blockquote>
</li>
</ul>
<ul class="simple">
<li>In the <strong>PlayerController</strong> script<ul>
<li>Update the <strong>PlayerController</strong>&#8216;s <strong>Initialize</strong> function with the following code:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">init</span> <span class="o">:</span> <span class="nx">CogInitializer</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// Step 1</span>
<span class="hll">  <span class="nx">Zero</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Space</span><span class="o">,</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">LogicUpdate</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">OnLogicUpdate</span><span class="p">);</span>
</span><span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><ul class="first">
<li>Update the <strong>PlayerController</strong>&#8216;s <strong>OnLogicUpdate</strong> function with the following code:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="c1">// Step 2</span>
<span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// Step 2a</span>
<span class="hll">  <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>
</span>
  <span class="c1">// Step 2b</span>
<span class="hll">  <span class="c1">// at the end, update</span>
</span>  <span class="c1">//                                2b.i      2b.ii</span>
<span class="hll">  <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Update</span><span class="p">(</span><span class="nx">movement</span><span class="o">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span><span class="p">);</span>
</span><span class="p">}</span>
</pre></div>
</div>
<p>Now we can change the movement by checking for key presses.</p>
<ul class="simple">
<li>In the <strong>PlayerController</strong> script<ul>
<li>Update the <strong>PlayerController</strong>&#8216;s <strong>OnLogicUpdate</strong> function with the following code:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>

<span class="hll">  <span class="c1">// control left, right, and up</span>
</span><span class="hll">  <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Left</span><span class="p">))</span>
</span><span class="hll">  <span class="p">{</span>
</span><span class="hll">    <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">-=</span> <span class="mf">1.0</span><span class="o">;</span>
</span><span class="hll">  <span class="p">}</span>
</span>
<span class="hll">  <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Right</span><span class="p">))</span>
</span><span class="hll">  <span class="p">{</span>
</span><span class="hll">    <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="mf">1.0</span><span class="o">;</span>
</span><span class="hll">  <span class="p">}</span>
</span>
<span class="hll">  <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsPressed</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">))</span>
</span><span class="hll">  <span class="p">{</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Jump</span><span class="p">();</span>
</span><span class="hll">  <span class="p">}</span>
</span>
  <span class="c1">// at the end, update</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Update</span><span class="p">(</span><span class="nx">movement</span><span class="o">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="SelectObject.html#selectobjectgam100"><span>Select the Player object</span></a></li>
<li>In the Properties Window<ul>
<li><a class="reference internal" href="AddComponent.html#addcomponentgam100"><span>Add the PlayerController component</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="RunTheGame.html#runthegamegam100"><span>Run the game</span></a><ul>
<li>Use the controls</li>
</ul>
</li>
</ul>
<p>At this point, all the controls are implemented for the Player, but the user cannot control the height of the player.  We want to tell the SweptController to stop jumping when the key is released.</p>
<ul class="simple">
<li>In the <strong>PlayerController</strong> script<ul>
<li>Update the <strong>PlayerController</strong>&#8216;s <strong>OnLogicUpdate</strong> function with the following code:</li>
</ul>
</li>
</ul>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">OnLogicUpdate</span><span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">UpdateEvent</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">var</span> <span class="nx">movement</span> <span class="o">=</span> <span class="nx">Real3</span><span class="p">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="p">);</span>

  <span class="c1">// control left, right, and up</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Left</span><span class="p">))</span>
  <span class="p">{</span>
    <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">-=</span> <span class="mf">1.0</span><span class="o">;</span>
  <span class="p">}</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Right</span><span class="p">))</span>
  <span class="p">{</span>
    <span class="nx">movement</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="mf">1.0</span><span class="o">;</span>
  <span class="p">}</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsPressed</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">))</span>
  <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Jump</span><span class="p">();</span>
  <span class="p">}</span>

<span class="hll">  <span class="c1">// if the jump key is not pressed, find the point of release and stop jumping</span>
</span><span class="hll">  <span class="k">if</span><span class="p">(</span><span class="nx">Zero</span><span class="p">.</span><span class="nb">Keyboard</span><span class="p">.</span><span class="nx">KeyIsDown</span><span class="p">(</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">Up</span><span class="p">)</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span>
</span><span class="hll">  <span class="p">{</span>
</span><span class="hll">    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Jumping</span><span class="p">)</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">      <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">JumpCancel</span><span class="p">();</span>
</span><span class="hll">    <span class="p">}</span>
</span><span class="hll">  <span class="p">}</span>
</span>
  <span class="c1">// at the end, update</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">Owner</span><span class="p">.</span><span class="nx">SweptController</span><span class="p">.</span><span class="nx">Update</span><span class="p">(</span><span class="nx">movement</span><span class="o">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">Dt</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="RunTheGame.html#runthegamegam100"><span>Run the game</span></a><ul>
<li>Use the controls</li>
</ul>
</li>
</ul>
<p>By quickly tapping the <code class="docutils literal"><span class="pre">Up</span> <span class="pre">Arrow</span></code> you can see the player&#8217;s jump height is lower.</p>
<p>Now we can continue following the SweptController instructions:</p>
<div class="highlight-as"><div class="highlight"><pre><span></span><span class="c1">// Usage:</span>
<span class="c1">// The user will need to make their own script for peripheral input.</span>
<span class="c1">// Each LogicUpdate, the input script should determine the direction of</span>
<span class="c1">// desired movement (does not need to be normalized) and pass it to the</span>
<span class="c1">// Update function of this script, along with the Dt from the UpdateEvent.</span>

<span class="c1">// Character controller is independent of physics update.</span>
<span class="hll"><span class="c1">// The RigidBody is expected to be Kinematic when using this controller.</span>
</span></pre></div>
</div>
<ul>
<li><p class="first"><a class="reference internal" href="SelectObject.html#selectobjectgam100"><span>Select the Player object</span></a></p>
</li>
<li><p class="first">In Properties Window</p>
<ul>
<li><p class="first">Under RigidBody</p>
<ul class="simple">
<li>Set DynamicState to: <code class="docutils literal"><span class="pre">Kinematic</span></code></li>
</ul>
<p><img alt="CP0_RigidBody" src="../../_images/CP0_14.png" /></p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="changeable-properties">
<h2>Changeable Properties</h2>
<p>By running the game, you will notice everything should work correctly, but the player can&#8217;t jump high enough to reach the upper platform.  We can change the JumpSpeed for the Player.</p>
<ul>
<li><p class="first"><a class="reference internal" href="SelectObject.html#selectobjectgam100"><span>Select the Player object</span></a></p>
</li>
<li><p class="first">In Properties Window</p>
<ul>
<li><p class="first">Under SweptController</p>
<ul class="simple">
<li>Set JumpSpeed to: <code class="docutils literal"><span class="pre">10</span></code></li>
</ul>
<p><img alt="CP0_SweptControllerJumpSpeed" src="../../_images/CP0_24.png" /></p>
</li>
</ul>
</li>
</ul>
<p>Now we know how to integrate the SweptController to make a platform character controller.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="FollowingCamera.html" class="btn btn-neutral float-right" title="Following Camera" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ParticleEffects.html" class="btn btn-neutral" title="Particle Effects" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, DigiPen Institute of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../cdn.mathjax.org/mathjax/latest/MathJaxdda6.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<script src="../../_static/js/extjquery.js"></script>



</body>

<!-- Mirrored from zero.digipen.edu/Workshops/GAM100/UsingTheSweptController.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 28 Dec 2022 00:12:23 GMT -->
</html>